(()=>{"use strict";var e={565:(e,t,a)=>{var s=a(751),r=a(641),l=a(33);const o={class:"navbar navbar-expand-lg navbar-dark bg-custom"},n={class:"container justify-content-center"},i={class:"navbar-nav"},c={class:"nav-item me-3"},d={class:"nav-item me-3"},u={class:"nav-item me-3"},m={class:"nav-item me-3"},p={class:"search-input-wrapper"},h={key:0,class:"search-results-dropdown"},k={key:0},g=["onClick"],y={key:1},v=["onClick"],b={class:"d-flex align-items-center"},L={key:1,class:"dropdown"},f={class:"btn dropdown-toggle d-flex align-items-center",type:"button",id:"playerDropdown","data-bs-toggle":"dropdown","aria-expanded":"false",style:{color:"var(--color-text)","font-weight":"bold"}},C=["src"],_={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"playerDropdown"},w={class:"dropdown-item non-clickable"},x={class:"form-check"},R={class:"form-check"},I={class:"form-check"},E={class:"dropdown-item non-clickable"},P={class:"form-check"},D={class:"form-check"};function T(e,t,a,T,S,X){const $=(0,r.g2)("router-link"),F=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",{id:"app",onClick:t[15]||(t[15]=(...e)=>X.closeDropdown&&X.closeDropdown(...e))},[(0,r.Lk)("nav",o,[(0,r.Lk)("div",n,[(0,r.Lk)("ul",i,[(0,r.Lk)("li",c,[(0,r.bF)($,{to:"/",class:"nav-link",style:{color:"var(--color-text)","font-weight":"bold"}},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.Lk)("i",{class:"bi bi-house"},null,-1),(0,r.eW)(" Home ")]))),_:1,__:[16]})]),(0,r.Lk)("li",d,[(0,r.bF)($,{to:"/maps",class:"nav-link",style:{color:"var(--color-text)","font-weight":"bold"}},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.Lk)("i",{class:"bi bi-globe"},null,-1),(0,r.eW)(" Maps ")]))),_:1,__:[17]})]),(0,r.Lk)("li",u,[(0,r.bF)($,{to:"/players",class:"nav-link",style:{color:"var(--color-text)","font-weight":"bold"}},{default:(0,r.k6)((()=>t[18]||(t[18]=[(0,r.Lk)("i",{class:"bi bi-trophy"},null,-1),(0,r.eW)(" Players ")]))),_:1,__:[18]})]),(0,r.Lk)("li",m,[(0,r.bF)($,{to:"/lookup",class:"nav-link",style:{color:"var(--color-text)","font-weight":"bold"}},{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.Lk)("i",{class:"bi bi-search"},null,-1),(0,r.eW)(" Lookup ")]))),_:1,__:[19]})])]),(0,r.Lk)("div",{class:"search-container",onClick:t[1]||(t[1]=(0,s.D$)((()=>{}),["stop"]))},[(0,r.Lk)("div",p,[t[20]||(t[20]=(0,r.Lk)("svg",{class:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,r.Lk)("circle",{cx:"11",cy:"11",r:"8"}),(0,r.Lk)("path",{d:"m21 21-4.35-4.35"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>S.searchQuery=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,S.searchQuery]])]),S.searchResults&&(S.searchResults.maps.length||S.searchResults.players.length)?((0,r.uX)(),(0,r.CE)("div",h,[S.searchResults.maps.length?((0,r.uX)(),(0,r.CE)("div",k,[t[21]||(t[21]=(0,r.Lk)("h6",null,"Maps",-1)),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(S.searchResults.maps,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,onClick:t=>X.goToMap(e.id)},(0,l.v_)(e.name||`Map ID: ${e.id}`),9,g)))),128))])])):(0,r.Q3)("",!0),S.searchResults.players.length?((0,r.uX)(),(0,r.CE)("div",y,[t[22]||(t[22]=(0,r.Lk)("h6",null,"Players",-1)),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(S.searchResults.players,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,onClick:t=>X.goToPlayer(e.id)},(0,l.v_)(e.name||`Player ID: ${e.id}`),9,v)))),128))])])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",b,[X.user&&Object.keys(X.user).length?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("button",{key:0,class:"btn login-button",onClick:t[2]||(t[2]=(...e)=>X.loginWithSteam&&X.loginWithSteam(...e))},t[23]||(t[23]=[(0,r.Lk)("i",{class:"bi bi-steam"},null,-1),(0,r.eW)(" Login with Steam ")]))),X.user&&Object.keys(X.user).length?((0,r.uX)(),(0,r.CE)("div",L,[(0,r.Lk)("button",f,[X.user.avatar?((0,r.uX)(),(0,r.CE)("img",{key:0,src:X.user.avatar,alt:"avatar",class:"rounded-circle me-2",width:"32",height:"32"},null,8,C)):(0,r.Q3)("",!0),(0,r.Lk)("span",null,(0,l.v_)(X.user.name),1)]),(0,r.Lk)("ul",_,[(0,r.Lk)("li",null,[(0,r.Lk)("a",{class:"dropdown-item clickable",onClick:t[3]||(t[3]=(...e)=>X.goToProfile&&X.goToProfile(...e)),href:"#"},"My profile")]),(0,r.Lk)("li",null,[(0,r.Lk)("div",w,[t[27]||(t[27]=(0,r.Lk)("h6",null,"Rank preference",-1)),(0,r.Lk)("div",x,[(0,r.bo)((0,r.Lk)("input",{class:"form-check-input",type:"radio",id:"preferenceOverall",name:"rankPreference","onUpdate:modelValue":t[4]||(t[4]=e=>S.rankPreference=e),value:"overall",onChange:t[5]||(t[5]=(...e)=>X.updateUserPreferences&&X.updateUserPreferences(...e))},null,544),[[s.XL,S.rankPreference]]),t[24]||(t[24]=(0,r.Lk)("label",{class:"form-check-label",for:"preferenceOverall",style:{color:"var(--color-text-clickable)",cursor:"pointer"}},"Overall",-1))]),(0,r.Lk)("div",R,[(0,r.bo)((0,r.Lk)("input",{class:"form-check-input",type:"radio",id:"preferenceSoldier",name:"rankPreference","onUpdate:modelValue":t[6]||(t[6]=e=>S.rankPreference=e),value:"soldier",onChange:t[7]||(t[7]=(...e)=>X.updateUserPreferences&&X.updateUserPreferences(...e))},null,544),[[s.XL,S.rankPreference]]),t[25]||(t[25]=(0,r.Lk)("label",{class:"form-check-label",for:"preferenceSoldier",style:{color:"var(--color-text-clickable)",cursor:"pointer"}},"Soldier",-1))]),(0,r.Lk)("div",I,[(0,r.bo)((0,r.Lk)("input",{class:"form-check-input",type:"radio",id:"preferenceDemoman",name:"rankPreference","onUpdate:modelValue":t[8]||(t[8]=e=>S.rankPreference=e),value:"demoman",onChange:t[9]||(t[9]=(...e)=>X.updateUserPreferences&&X.updateUserPreferences(...e))},null,544),[[s.XL,S.rankPreference]]),t[26]||(t[26]=(0,r.Lk)("label",{class:"form-check-label",for:"preferenceDemoman",style:{color:"var(--color-text-clickable)",cursor:"pointer"}},"Demoman",-1))])])]),(0,r.Lk)("li",null,[(0,r.Lk)("div",E,[t[30]||(t[30]=(0,r.Lk)("h6",null,"Rank gender",-1)),(0,r.Lk)("div",P,[(0,r.bo)((0,r.Lk)("input",{class:"form-check-input",type:"radio",id:"genderMale",name:"gender","onUpdate:modelValue":t[10]||(t[10]=e=>S.gender=e),value:"male",onChange:t[11]||(t[11]=(...e)=>X.updateUserPreferences&&X.updateUserPreferences(...e))},null,544),[[s.XL,S.gender]]),t[28]||(t[28]=(0,r.Lk)("label",{class:"form-check-label",for:"genderMale",style:{color:"var(--color-text-clickable)",cursor:"pointer"}},"Male",-1))]),(0,r.Lk)("div",D,[(0,r.bo)((0,r.Lk)("input",{class:"form-check-input",type:"radio",id:"genderFemale",name:"gender","onUpdate:modelValue":t[12]||(t[12]=e=>S.gender=e),value:"female",onChange:t[13]||(t[13]=(...e)=>X.updateUserPreferences&&X.updateUserPreferences(...e))},null,544),[[s.XL,S.gender]]),t[29]||(t[29]=(0,r.Lk)("label",{class:"form-check-label",for:"genderFemale",style:{color:"var(--color-text-clickable)",cursor:"pointer"}},"Female",-1))])])]),t[31]||(t[31]=(0,r.Lk)("li",null,[(0,r.Lk)("hr",{class:"dropdown-divider"})],-1)),(0,r.Lk)("li",null,[(0,r.Lk)("a",{class:"dropdown-item clickable",onClick:t[14]||(t[14]=(...e)=>X.logout&&X.logout(...e)),href:"#"},"Logout")])])])):(0,r.Q3)("",!0)])])]),(0,r.bF)(F)])}var S=a(987),X=a(334),$=a.n(X);const F="http://localhost:3000",A={name:"App",data(){return{searchQuery:"",searchResults:null,rankPreference:"overall",gender:"male"}},computed:{user(){const e=S.A.get("user");return e?JSON.parse(e):{}}},methods:{closeDropdown(){this.searchResults=null},loginWithSteam(){window.location.href=`${F}/auth/steam`},logout(){S.A.remove("user"),this.$router.push({name:"Home"})},async updateUserPreferences(){if(this.user&&this.user.steamid)try{const e=await fetch(`${F}/users/update-user/${this.user.playerid}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rankPref:this.rankPreference,gender:this.gender})});if(!e.ok)throw new Error("Failed to update user preferences");const t=await e.json();console.log("User preferences updated:",t);const a={...this.user,rankpref:this.rankPreference,gender:this.gender};S.A.set("user",JSON.stringify(a),{expires:3650,sameSite:"Lax"})}catch(e){console.error("Error updating user preferences:",e)}},async goToProfile(){if(this.user&&this.user.steamid)try{const e=await fetch(`${F}/players/login/${this.user.steamid}`,{method:"GET",credentials:"include"});if(!e.ok)throw new Error("Failed to fetch playerId");const t=await e.json(),a=t[0].id;if(!a)throw new Error("playerId missing in response");this.$router.push({name:"PlayerPage",params:{playerId:a}})}catch(e){console.error("Failed to login to backend:",e)}},goToMap(e){this.$router.push({name:"Records",params:{mapId:e}}),this.searchResults=null},goToPlayer(e){this.$router.push({name:"PlayerPage",params:{playerId:e}}),this.searchResults=null},async fetchSearchResults(){if(this.searchQuery.trim())try{const e=await fetch(`${F}/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:this.searchQuery})});if(!e.ok)throw new Error("Failed to fetch search results");const t=await e.json();t.players&&t.players.length>20&&(t.players=t.players.slice(0,20)),t.maps&&t.maps.length>5&&(t.maps=t.maps.slice(0,5)),this.searchResults=t}catch(e){console.error("Error fetching search results:",e)}else this.searchResults=null}},created(){this.debouncedSearch=$()(this.fetchSearchResults,500)},watch:{searchQuery(){this.debouncedSearch()}},mounted(){const e=new URLSearchParams(window.location.search),t=e.get("playerid"),a=e.get("name"),s=e.get("avatar"),r=e.get("steamid"),l=S.A.get("user");if(l){const e=JSON.parse(l);this.rankPreference=e.rankpref,this.gender=e.gender}else t?(console.log("URL parameters found, setting user data..."),fetch(`${F}/users/${t}`).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{console.log("Fetched user data:",e),this.rankPreference=e.rank_pref,this.gender=e.gender;const t={name:a,avatar:s,steamid:r,playerid:e.player_id,rankpref:e.rank_pref,gender:e.gender};S.A.set("user",JSON.stringify(t),{expires:3650,sameSite:"Lax"}),this.$router.replace({path:this.$route.path,query:{}})})).catch((e=>{console.error("Error fetching user data:",e)}))):(console.log("No URL parameters or user cookie found."),this.logout())}};var M=a(262);const G=(0,M.A)(A,[["render",T],["__scopeId","data-v-a991821a"]]),V=G;var N=a(220);const B={class:"min-h-screen bg-dark-custom"},O={class:"container mx-auto py-4 d-flex flex-column align-items-center"},Q={class:"content-container"},U={class:"button-group"},K={key:0,class:"text-center py-5"},j={class:"spinner-border text-light",role:"status"},W={class:"visually-hidden"},z={key:1,class:"table-container"},H={key:0,class:"table-wrapper"},J={class:"table-responsive"},q={class:"table table-dark"},Y=["onClick"],Z=["src","alt"],ee=["onClick"],te=["src","alt"],ae={class:"type-cell"},se={class:"record-type",style:{color:"var(--color-text)"}},re={class:"timestamp-cell"},le={key:1,class:"table-wrapper"},oe={class:"table-responsive"},ne={class:"table table-dark"},ie=["onClick"],ce=["src"],de=["onClick"],ue={class:"align-middle"},me=["onClick"],pe={key:2,class:"table-wrapper"},he={class:"table-responsive"},ke={class:"table table-dark"},ge={key:0},ye={key:1},ve={key:0},be={key:1},Le=["onClick"],fe={class:"align-middle"},Ce={class:"server-location"},_e=["src"],we={class:"align-middle"},xe={class:"server-name"},Re=["onClick"],Ie={class:"align-middle"},Ee={class:"player-info"},Pe={class:"align-middle"},De=["onClick"];function Te(e,t,a,o,n,i){return(0,r.uX)(),(0,r.CE)("div",B,[t[15]||(t[15]=(0,r.Fv)('<div class="header-hero" data-v-38c6702e><div class="header-overlay" data-v-38c6702e></div><div class="header-content" data-v-38c6702e><h1 class="header-title" data-v-38c6702e>Tempus plaza</h1><p class="header-subtitle" data-v-38c6702e>Information about the Tempus network</p></div><div class="header-gradient" data-v-38c6702e></div></div>',1)),(0,r.Lk)("div",O,[(0,r.Lk)("div",Q,[(0,r.Lk)("div",U,[(0,r.Lk)("button",{class:(0,l.C4)([{active:"activity"===n.currentView},"toggle-btn btn btn-dark update-button"]),onClick:t[0]||(t[0]=e=>i.switchView("activity"))}," Activity ",2),(0,r.Lk)("button",{class:(0,l.C4)([{active:"topplayers"===n.currentView},"toggle-btn btn btn-dark update-button"]),onClick:t[1]||(t[1]=e=>i.switchView("topplayers"))}," Top players online ",2),(0,r.Lk)("button",{class:(0,l.C4)([{active:"servers"===n.currentView},"toggle-btn btn btn-dark update-button"]),onClick:t[2]||(t[2]=e=>i.switchView("servers"))}," Servers ",2)]),n.loading?((0,r.uX)(),(0,r.CE)("div",K,[(0,r.Lk)("div",j,[(0,r.Lk)("span",W,"Loading "+(0,l.v_)(n.currentView)+"...",1)])])):((0,r.uX)(),(0,r.CE)("div",z,["activity"===n.currentView?((0,r.uX)(),(0,r.CE)("div",H,[t[6]||(t[6]=(0,r.Lk)("div",{class:"table-header-content",style:{background:"linear-gradient(\r\n                  90deg,\r\n                  var(--color-primary),\r\n                  var(--color-box)\r\n                )"}},[(0,r.Lk)("div",{class:"table-header-text"},[(0,r.Lk)("p",{class:"table-header-title"},"Latest world records")])],-1)),(0,r.Lk)("div",J,[(0,r.Lk)("table",q,[t[5]||(t[5]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Player"),(0,r.Lk)("th",null,"Map"),(0,r.Lk)("th",null,"Type"),(0,r.Lk)("th",null,"Time")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.activityData,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",{class:"name-cell align-middle player-name clickable name-column",onClick:t=>i.goToPlayer(e.player_id)},[(0,r.Lk)("img",{src:e.avatar,alt:e.player+" avatar",class:"avatar",onerror:"this.src='/avatars/golly.jpg'"},null,8,Z),(0,r.eW)(" "+(0,l.v_)(e.player),1)],8,Y),(0,r.Lk)("td",{class:"name-cell align-middle map-name clickable",onClick:t=>i.goToMap(e.map_id)},[(0,r.Lk)("img",{src:`icons/${e.class}.png`,alt:e.class,class:"class-icon-small"},null,8,te),(0,r.eW)(" "+(0,l.v_)(e.map),1)],8,ee),(0,r.Lk)("td",null,[(0,r.Lk)("div",ae,[(0,r.Lk)("span",se,["map"===e.recordType?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.eW)("🌍 Map")],64)):"course"===e.recordType?((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.eW)("🚩 Course "+(0,l.v_)(e.index),1)],64)):"bonus"===e.recordType?((0,r.uX)(),(0,r.CE)(r.FK,{key:2},[(0,r.eW)("⭐ Bonus "+(0,l.v_)(e.index),1)],64)):(0,r.Q3)("",!0)])])]),(0,r.Lk)("td",re,(0,l.v_)(e.timestamp),1)])))),128))])])])])):(0,r.Q3)("",!0),"topplayers"===n.currentView?((0,r.uX)(),(0,r.CE)("div",le,[t[8]||(t[8]=(0,r.Lk)("div",{class:"table-header-content",style:{background:"linear-gradient(\r\n                  90deg,\r\n                  var(--color-primary),\r\n                  var(--color-box)\r\n                )"}},[(0,r.Lk)("div",{class:"table-header-text"},[(0,r.Lk)("p",{class:"table-header-title"},"Top players")])],-1)),(0,r.Lk)("div",oe,[(0,r.Lk)("table",ne,[t[7]||(t[7]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Rank"),(0,r.Lk)("th",null,"Player"),(0,r.Lk)("th",null,"Map"),(0,r.Lk)("th",null,"Server"),(0,r.Lk)("th",null,"Connect")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.topPlayersData,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:e.player_id},[(0,r.Lk)("td",null,(0,l.v_)(e.highest_rank)+" "+(0,l.v_)(e.highest_rank_type),1),(0,r.Lk)("td",{class:"name-cell align-middle player-name clickable",onClick:t=>i.goToPlayer(e.player_id),style:{color:"var(--color-text-clickable)"}},[(0,r.Lk)("img",{src:e.steam_avatar,alt:"Avatar",class:"avatar"},null,8,ce),(0,r.eW)(" "+(0,l.v_)(e.player_name),1)],8,ie),(0,r.Lk)("td",{class:"name-cell align-middle player-name clickable",onClick:t=>i.goToMap(e.map_id),style:{color:"var(--color-text-clickable)"}},(0,l.v_)(e.currentMap),9,de),(0,r.Lk)("td",null,(0,l.v_)(e.shortname)+" | "+(0,l.v_)(e.server_name),1),(0,r.Lk)("td",ue,[(0,r.Lk)("button",{onClick:(0,s.D$)((t=>i.connectToServer(e.ipaddr,e.port)),["stop"]),class:"btn btn-primary btn-sm connect-btn",style:{background:"var(--color-primary)",border:"none","font-weight":"bold"}}," Connect ",8,me)])])))),128))])])])])):(0,r.Q3)("",!0),"servers"===n.currentView?((0,r.uX)(),(0,r.CE)("div",pe,[t[14]||(t[14]=(0,r.Lk)("div",{class:"table-header-content",style:{background:"linear-gradient(\r\n                  90deg,\r\n                  var(--color-primary),\r\n                  var(--color-box)\r\n                )"}},[(0,r.Lk)("div",{class:"table-header-text"},[(0,r.Lk)("p",{class:"table-header-title"},"Server status")])],-1)),(0,r.Lk)("div",he,[(0,r.Lk)("table",ke,[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{onClick:t[3]||(t[3]=(...e)=>i.sortServersByRegion&&i.sortServersByRegion(...e)),style:{cursor:"pointer"}},[t[9]||(t[9]=(0,r.eW)(" Location ")),1===n.sortDirection?((0,r.uX)(),(0,r.CE)("span",ge,"↑")):((0,r.uX)(),(0,r.CE)("span",ye,"↓"))]),t[11]||(t[11]=(0,r.Lk)("th",null,"Server",-1)),t[12]||(t[12]=(0,r.Lk)("th",null,"Map",-1)),(0,r.Lk)("th",{onClick:t[4]||(t[4]=(...e)=>i.sortServersByPlayers&&i.sortServersByPlayers(...e)),style:{cursor:"pointer"}},[t[10]||(t[10]=(0,r.eW)(" Players ")),1===n.sortDirection?((0,r.uX)(),(0,r.CE)("span",ve,"↓")):((0,r.uX)(),(0,r.CE)("span",be,"↑"))]),t[13]||(t[13]=(0,r.Lk)("th",null,"Connect",-1))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.serversData,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id,onClick:t=>i.selectServer(e)},[(0,r.Lk)("td",fe,[(0,r.Lk)("div",Ce,[(0,r.Lk)("img",{src:i.getFlagImageUrl(e.country_code),alt:"Flag",class:"flag-icon"},null,8,_e),(0,r.eW)(" "+(0,l.v_)(e.country),1)])]),(0,r.Lk)("td",we,[(0,r.Lk)("div",xe,(0,l.v_)(e.name),1)]),(0,r.Lk)("td",{class:"map-cell clickable align-middle",onClick:t=>i.goToMap(e.map_id)},(0,l.v_)(e.currentMap),9,Re),(0,r.Lk)("td",Ie,[(0,r.Lk)("div",Ee,[(0,r.Lk)("span",null,(0,l.v_)(e.playerCount)+"/"+(0,l.v_)(e.maxPlayers),1),(0,r.Lk)("div",{class:(0,l.C4)(["server-status",i.getServerStatusClass(e.playerCount,e.maxPlayers)])},null,2)])]),(0,r.Lk)("td",Pe,[(0,r.Lk)("button",{onClick:(0,s.D$)((t=>i.connectToServer(e.ipAddr,e.port)),["stop"]),class:"btn btn-primary btn-sm connect-btn",style:{background:"var(--color-primary)",border:"none","font-weight":"bold"}}," Connect ",8,De)])],8,Le)))),128))])])])])):(0,r.Q3)("",!0)]))])])])}function Se(e){const t=e,a=Math.floor(t/3600),s=Math.floor(t%3600/60),r=Math.floor(t%60),l=Math.floor(t%1*1e3);return a>0?`${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}.${l.toString().padStart(3,"0")}`:`${s.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}.${l.toString().padStart(3,"0")}`}function Xe(e){const t=Date.now()/1e3,a=Math.floor(t-e),s=60,r=3600,l=86400,o=604800,n=2592e3,i=31536e3,c=(e,t)=>`${e} ${t}${1===e?"":"s"} ago`;if(a<s)return c(a,"second");if(a<r){const e=Math.floor(a/s);return c(e,"minute")}if(a<l){const e=Math.floor(a/r);return c(e,"hour")}if(a<o){const e=Math.floor(a/l);return c(e,"day")}if(a<n){const e=Math.floor(a/o);return c(e,"week")}if(a<i){const e=Math.floor(a/n);return c(e,"month")}{const e=Math.floor(a/i);return c(e,"year")}}const $e={name:"Home",data(){return{currentView:"activity",loading:!1,activityData:[],topPlayersData:[],serversData:[],selectedServer:null,sortDirection:1}},async created(){document.title="Tempus plaza - Home",await Promise.all([this.fetchActivityData(),this.fetchTopPlayersData(),this.fetchServersData()])},methods:{sortServersByPlayers(){this.sortDirection*=-1,this.serversData.sort(((e,t)=>(e.playerCount-t.playerCount)*this.sortDirection))},sortServersByRegion(){this.sortDirection*=-1;const e=["north_america","europe","asia","oceania","south_america","africa","middle_east"];this.serversData.sort(((t,a)=>{const s=e.indexOf(t.region),r=e.indexOf(a.region);return s!==r?(s-r)*this.sortDirection:t.country.localeCompare(a.country)*this.sortDirection}))},async fetchActivityData(){this.loading=!0;try{const e=await fetch("http://localhost:3000/maps/activity"),t=await e.json();this.activityData=t.map((e=>({id:e.id,player:e.player_name,player_id:e.player_id,avatar:e.steam_avatar,map:e.map_name,map_id:e.map_id,time:Se(e.duration),class:e.class,recordType:e.map_type,index:e.type_index,timestamp:Xe(e.record_date)})))}catch(e){console.error("There was an error fetching the activity data:",e)}finally{this.loading=!1}},async fetchTopPlayersData(){this.loading=!0;try{const e=await fetch("http://localhost:3000/servers/top-players"),t=await e.json();this.topPlayersData=t.sort(((e,t)=>t.score-e.score)).slice(0,20)}catch(e){console.error("There was an error fetching the top players data:",e)}finally{this.loading=!1}},async fetchServersData(){this.loading=!0;try{const e=await fetch("http://localhost:3000/servers"),t=await e.json(),a=["north_america","europe","asia","oceania","south_america","africa","middle_east"];this.serversData=t.sort(((e,t)=>{const s=a.indexOf(e.region),r=a.indexOf(t.region);return s!==r?s-r:e.country.localeCompare(t.country)}))}catch(e){console.error("There was an error fetching the servers data:",e)}finally{this.loading=!1}},getFlagImageUrl(e){const t=/^[a-zA-Z]{2}$/.test(e)?e.toLowerCase():"unknown";return`https://flagcdn.com/24x18/${t}.png`},switchView(e){this.currentView!==e&&(this.currentView=e)},getServerStatusClass(e,t){const a=e/t;return a>.8?"status-high":a>.4?"status-medium":"status-low"},connectToServer(e,t){window.open(`steam://connect/${e}:${t}`,"_blank")},goToPlayer(e){this.$router.push({name:"PlayerPage",params:{playerId:e}})},selectServer(e){this.selectedServer=e},goToMap(e){this.$router.push({name:"Records",params:{mapId:e}})}}},Fe=(0,M.A)($e,[["render",Te],["__scopeId","data-v-38c6702e"]]),Ae=Fe,Me={class:"container maps-container py-4 d-flex flex-column align-items-center bg-dark-custom"},Ge={key:0},Ve={class:"text-center maps-title"},Ne={class:"category-tabs-container my-4"},Be={class:"category-tabs"},Oe=["onClick"],Qe={class:"subcategory-container my-3"},Ue={class:"subcategory-pills"},Ke={key:0,class:"pill-row"},je={key:1,class:"pill-row"},We=["onClick"],ze={key:2,class:"pill-row"},He=["onClick"],Je={key:1,class:"text-center"},qe={key:2,class:"alert alert-danger"},Ye={key:3,class:"tables-wrapper d-flex flex-column flex-md-row justify-content-center"},Ze={class:"table-wrapper"},et={class:"maps-header",style:{background:"linear-gradient(\r\n              90deg,\r\n              var(--color-primary),\r\n              var(--color-box)\r\n            )"}},tt={class:"header-content"},at={class:"header-text"},st={class:"header-type"},rt={class:"header-tier-rating"},lt={class:"table-responsive"},ot={class:"table table-dark"},nt={key:0},it={key:1},ct={key:2},dt={class:"duration-column"},ut=["onClick"],mt={class:"date-column"},pt={class:"maps-footer"},ht={class:"table-wrapper"},kt={class:"maps-header",style:{background:"linear-gradient(\r\n              90deg,\r\n              var(--color-primary),\r\n              var(--color-box)\r\n            )"}},gt={class:"header-content"},yt={class:"header-text"},vt={class:"header-type"},bt={class:"header-tier-rating"},Lt={class:"table-responsive"},ft={class:"table table-dark"},Ct={key:0},_t={key:1},wt={key:2},xt={class:"duration-column"},Rt=["onClick"],It={class:"date-column"},Et={class:"maps-footer"};function Pt(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("div",Me,[!o.loading&&o.selectedRecords.length>0?((0,r.uX)(),(0,r.CE)("div",Ge,[(0,r.Lk)("div",{class:"map-name-container clickable",onClick:t[0]||(t[0]=e=>n.goToMap(a.mapId))},[(0,r.Lk)("h1",Ve,(0,l.v_)(o.selectedRecords[0].map_name),1)])])):(0,r.Q3)("",!0),t[9]||(t[9]=(0,r.Lk)("hr",{class:"row-divider",style:{width:"75%"}},null,-1)),(0,r.Lk)("div",Ne,[(0,r.Lk)("div",Be,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(["Map","Course","Bonus"],(e=>(0,r.Lk)("button",{key:e,class:(0,l.C4)(["category-tab",{active:o.selectedTypePill===e}]),onClick:t=>n.selectType(e)},(0,l.v_)(e),11,Oe))),64))])]),(0,r.Lk)("div",Qe,[(0,r.Lk)("div",Ue,["Map"===o.selectedTypePill?((0,r.uX)(),(0,r.CE)("div",Ke,[(0,r.Lk)("button",{class:(0,l.C4)(["subcategory-pill map-pill",{active:""===o.selectedIndex}]),onClick:t[1]||(t[1]=e=>n.selectRecords("map",""))}," Map ",2)])):(0,r.Q3)("",!0),"Course"===o.selectedTypePill&&o.courseCount>0?((0,r.uX)(),(0,r.CE)("div",je,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.courseCount,(e=>((0,r.uX)(),(0,r.CE)("button",{key:"course-"+e,class:(0,l.C4)(["subcategory-pill course-pill",{active:o.selectedCourseIndex===e}]),onClick:t=>n.selectRecords("course",e)}," Course "+(0,l.v_)(e),11,We)))),128))])):(0,r.Q3)("",!0),"Bonus"===o.selectedTypePill&&o.bonusCount>0?((0,r.uX)(),(0,r.CE)("div",ze,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.bonusCount,(e=>((0,r.uX)(),(0,r.CE)("button",{key:"bonus-"+e,class:(0,l.C4)(["subcategory-pill bonus-pill",{active:o.selectedBonusIndex===e}]),onClick:t=>n.selectRecords("bonus",e)}," Bonus "+(0,l.v_)(e),11,He)))),128))])):(0,r.Q3)("",!0)])]),t[10]||(t[10]=(0,r.Lk)("hr",{class:"row-divider",style:{width:"75%"}},null,-1)),o.loading?((0,r.uX)(),(0,r.CE)("div",Je,t[4]||(t[4]=[(0,r.Lk)("div",{class:"spinner-border text-light",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading records...")],-1)]))):o.error?((0,r.uX)(),(0,r.CE)("div",qe,(0,l.v_)(o.error),1)):((0,r.uX)(),(0,r.CE)("div",Ye,[(0,r.Lk)("div",Ze,[(0,r.Lk)("div",et,[(0,r.Lk)("div",tt,[t[5]||(t[5]=(0,r.Lk)("img",{src:"/icons/soldier.png",alt:"Soldier Icon",class:"class-icon"},null,-1)),(0,r.Lk)("div",at,[(0,r.Lk)("p",st,(0,l.v_)(o.selectedType)+" "+(0,l.v_)(null!==o.selectedIndex?o.selectedIndex:""),1),(0,r.Lk)("p",rt," T"+(0,l.v_)(n.selectedTier("soldier"))+" - R"+(0,l.v_)(n.selectedRating("soldier")),1)])])]),(0,r.Lk)("div",lt,[(0,r.Lk)("table",ot,[t[6]||(t[6]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Rank"),(0,r.Lk)("th",null,"Duration"),(0,r.Lk)("th",null,"Player"),(0,r.Lk)("th",{style:{"text-align":"right"}},"Date")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.displayedSoldierEntries,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:"soldier-"+t},[(0,r.Lk)("td",{class:(0,l.C4)(["rank-column",n.getPlacementClass(e.placement)])},[t+1===1?((0,r.uX)(),(0,r.CE)("span",nt,"🥇")):t+1===2?((0,r.uX)(),(0,r.CE)("span",it,"🥈")):t+1===3?((0,r.uX)(),(0,r.CE)("span",ct,"🥉")):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,l.v_)(t+1),1)],2),(0,r.Lk)("td",dt,(0,l.v_)(n.formatDuration(e.duration)),1),(0,r.Lk)("td",{class:"name-cell align-middle player-name clickable name-column",onClick:t=>n.goToPlayer(e.id)},(0,l.v_)(e.name),9,ut),(0,r.Lk)("td",mt,(0,l.v_)(n.formatDate(e.date)),1)])))),128))])])]),(0,r.Lk)("div",pt,[n.displayedSoldierEntries.length<o.selectedRecords.length?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.showMoreSoldierEntries&&n.showMoreSoldierEntries(...e)),class:"btn btn-dark update-button",style:{background:"var(--color-primary)","font-weight":"bold",width:"100%"}}," Show more ")):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",ht,[(0,r.Lk)("div",kt,[(0,r.Lk)("div",gt,[t[7]||(t[7]=(0,r.Lk)("img",{src:"/icons/demoman.png",alt:"Demoman Icon",class:"class-icon"},null,-1)),(0,r.Lk)("div",yt,[(0,r.Lk)("p",vt,(0,l.v_)(o.selectedType)+" "+(0,l.v_)(null!==o.selectedIndex?o.selectedIndex:""),1),(0,r.Lk)("p",bt," T"+(0,l.v_)(n.selectedTier("demoman"))+" - R"+(0,l.v_)(n.selectedRating("demoman")),1)])])]),(0,r.Lk)("div",Lt,[(0,r.Lk)("table",ft,[t[8]||(t[8]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Rank"),(0,r.Lk)("th",null,"Duration"),(0,r.Lk)("th",null,"Player"),(0,r.Lk)("th",{style:{"text-align":"right"}},"Date")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.displayedDemomanEntries,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:"demoman-"+t},[(0,r.Lk)("td",{class:(0,l.C4)(["rank-column",n.getPlacementClass(e.placement)])},[t+1===1?((0,r.uX)(),(0,r.CE)("span",Ct,"🥇")):t+1===2?((0,r.uX)(),(0,r.CE)("span",_t,"🥈")):t+1===3?((0,r.uX)(),(0,r.CE)("span",wt,"🥉")):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,l.v_)(t+1),1)],2),(0,r.Lk)("td",xt,(0,l.v_)(n.formatDuration(e.duration)),1),(0,r.Lk)("td",{class:"name-cell align-middle player-name clickable name-column",onClick:t=>n.goToPlayer(e.id)},(0,l.v_)(e.name),9,Rt),(0,r.Lk)("td",It,(0,l.v_)(n.formatDate(e.date)),1)])))),128))])])]),(0,r.Lk)("div",Et,[n.displayedDemomanEntries.length<o.selectedRecords.length?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[3]||(t[3]=(...e)=>n.showMoreDemomanEntries&&n.showMoreDemomanEntries(...e)),class:"btn btn-dark update-button",style:{background:"var(--color-primary)","font-weight":"bold",width:"100%"}}," Show more ")):(0,r.Q3)("",!0)])])]))])}var Dt=a(335);const Tt={name:"Records",props:{mapId:{type:Number,required:!0}},data(){return{selectedRecords:[],loading:!1,error:null,soldierDisplayCount:100,demomanDisplayCount:100,courseCount:0,bonusCount:0,Map__soldier_tier:0,Map__soldier_rating:0,Map__demoman_tier:0,Map__demoman_rating:0,selectedType:"Map",selectedTypePill:"Map",selectedIndex:"",selectedCourseIndex:"",selectedBonusIndex:""}},computed:{displayedSoldierEntries(){return this.selectedRecords.filter((e=>"soldier"===e.class)).slice(0,this.soldierDisplayCount)},displayedDemomanEntries(){return this.selectedRecords.filter((e=>"demoman"===e.class)).slice(0,this.demomanDisplayCount)}},mounted(){this.fetchMapData()},methods:{selectType(e){this.selectedTypePill=e},selectedTier(e){if(this.selectedType&&null!==this.selectedIndex){const t=this.selectedType,a=`${t}_${this.selectedIndex}_${e}_tier`;return this[a]||0}return 0},selectedRating(e){if(this.selectedType&&null!==this.selectedIndex){const t=this.selectedType,a=`${t}_${this.selectedIndex}_${e}_rating`;return this[a]||0}return 0},async fetchMapData(){this.loading=!0,this.error=null;try{const e=await Dt.A.get(`http://localhost:3000/maps/${this.mapId}/all-info`),{map:t,courses:a,bonuses:s}=e.data;this.courseCount=t.course_count||0,this.bonusCount=t.bonus_count||0,this.Map__soldier_tier=t.soldier_tier||0,this.Map__soldier_rating=t.soldier_rating||0,this.Map__demoman_tier=t.demoman_tier||0,this.Map__demoman_rating=t.demoman_rating||0;for(let r=0;r<this.courseCount;r++){const e=r+1,t=a[r];this[`Course_${e}_soldier_tier`]=t.soldier_tier||0,this[`Course_${e}_soldier_rating`]=t.soldier_rating||0,this[`Course_${e}_demoman_tier`]=t.demoman_tier||0,this[`Course_${e}_demoman_rating`]=t.demoman_rating||0}for(let r=0;r<this.bonusCount;r++){const e=r+1,t=s[r];this[`Bonus_${e}_soldier_tier`]=t.soldier_tier||0,this[`Bonus_${e}_soldier_rating`]=t.soldier_rating||0,this[`Bonus_${e}_demoman_tier`]=t.demoman_tier||0,this[`Bonus_${e}_demoman_rating`]=t.demoman_rating||0}this.fetchLeaderboardData()}catch(e){this.error="Error fetching map data.",console.error("Error fetching map data:",e)}finally{this.loading=!1}},async fetchLeaderboardData(){this.loading=!0,this.error=null;try{const e=await Dt.A.get(`http://localhost:3000/maps/${this.mapId}/records`);this.selectedRecords=e.data,document.title="Tempus plaza - "+e.data[0].map_name}catch(e){this.error="Error fetching leaderboard data.",console.error("Error fetching leaderboard data:",e)}finally{this.loading=!1}},async fetchCourseRecords(e){this.loading=!0,this.error=null;try{const t=await Dt.A.get(`http://localhost:3000/maps/${this.mapId}/course/${e}/records`);this.selectedRecords=t.data}catch(t){this.error="Error fetching course records.",console.error("Error fetching course records:",t)}finally{this.loading=!1}},async fetchBonusRecords(e){this.loading=!0,this.error=null;try{const t=await Dt.A.get(`http://localhost:3000/maps/${this.mapId}/bonus/${e}/records`);this.selectedRecords=t.data}catch(t){this.error="Error fetching bonus records.",console.error("Error fetching bonus records:",t)}finally{this.loading=!1}},selectRecords(e,t){this.selectedType=e.charAt(0).toUpperCase()+e.slice(1),this.selectedIndex=void 0!==t?t:null,"map"===e?this.fetchLeaderboardData():"course"===e?(this.selectedCourseIndex=t,this.selectedBonusIndex=null,this.fetchCourseRecords(t)):"bonus"===e&&(this.selectedCourseIndex=null,this.selectedBonusIndex=t,this.fetchBonusRecords(t)),this.soldierDisplayCount=100,this.demomanDisplayCount=100},formatDuration(e){return Se(e)},formatDate(e){return Xe(e)},getPlacementClass(e){const t={1:"placement-gold",2:"placement-silver",3:"placement-bronze",11:"placement-g1",12:"placement-g2",13:"placement-g3",14:"placement-g4",15:"placement-g5"};return e>=4&&e<=10?"placement-blue":t[e]||""},async goToPlayer(e){this.$router.push({name:"PlayerPage",params:{playerId:e}})},goToMap(e){this.$router.push({name:"MapPage",params:{mapId:e}})},showMoreSoldierEntries(){this.soldierDisplayCount+=100},showMoreDemomanEntries(){this.demomanDisplayCount+=100}}},St=(0,M.A)(Tt,[["render",Pt],["__scopeId","data-v-25a90299"]]),Xt=St,$t={class:"container maps-container py-4 d-flex flex-column align-items-center bg-dark-custom"},Ft={key:0,class:"picker-section"},At={class:"picker-controls"},Mt=["disabled"],Gt={key:0},Vt={key:1},Nt={key:1,class:"picker-status"},Bt={class:"remaining-count"},Ot={class:"filter-section"},Qt={class:"filter-content"},Ut={class:"filter-columns"},Kt={class:"filter-column"},jt={class:"filter-group"},Wt={class:"tier-filter-container"},zt={class:"tier-filters"},Ht=["value"],Jt={class:"filter-group mt-3"},qt={class:"rating-filter-container"},Yt={class:"rating-filters"},Zt=["value"],ea={class:"filter-column"},ta={class:"filter-group"},aa={class:"tier-filter-container"},sa={class:"tier-filters"},ra=["value"],la={class:"filter-group mt-3"},oa={class:"rating-filter-container"},na={class:"rating-filters"},ia=["value"],ca={class:"filter-actions"},da={class:"text-light"},ua={key:1,class:"text-center"},ma={class:"spinner-border text-light",role:"status"},pa={class:"visually-hidden"},ha={key:2,class:"alert alert-danger"},ka={key:3,class:"table-container"},ga={class:"button-group"},ya={class:"table-responsive w-100",style:{"max-width":"1296px"}},va={class:"table table-dark"},ba={class:"table-header"},La={key:0},fa={key:0},Ca={key:0},_a={key:0},wa=["onClick"];function xa(e,t,a,o,n,i){return(0,r.uX)(),(0,r.CE)("div",$t,[i.filteredAndSortedItems.length>0?((0,r.uX)(),(0,r.CE)("div",Ft,[(0,r.Lk)("div",At,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.startRandomPicker&&i.startRandomPicker(...e)),disabled:n.isPickerActive||i.filteredAndSortedItems.length<=1,class:(0,l.C4)(["btn picker-btn",{"picker-btn-active":n.isPickerActive}])},[n.isPickerActive?((0,r.uX)(),(0,r.CE)("span",Vt,"Eliminating...")):((0,r.uX)(),(0,r.CE)("span",Gt,"Random map picker"))],10,Mt),n.eliminatedRows.size>0?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>i.resetPicker&&i.resetPicker(...e)),class:"btn btn-secondary ml-2"}," Reset ")):(0,r.Q3)("",!0),n.isPickerActive||n.eliminatedRows.size>0?((0,r.uX)(),(0,r.CE)("div",Nt,[(0,r.Lk)("span",Bt,(0,l.v_)(i.remainingCount)+" remaining",1)])):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0),t[29]||(t[29]=(0,r.Lk)("hr",{class:"row-divider",style:{width:"75%"}},null,-1)),(0,r.Lk)("div",Ot,[(0,r.Lk)("div",Qt,[(0,r.Lk)("div",Ut,[(0,r.Lk)("div",Kt,[(0,r.Lk)("div",jt,[t[18]||(t[18]=(0,r.Lk)("h6",{class:"filter-title text-light mb-2"},"Soldier tiers",-1)),(0,r.Lk)("div",Wt,[(0,r.Lk)("div",zt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.availableTiers,(e=>((0,r.uX)(),(0,r.CE)("label",{key:"soldier-tier-"+e,class:"tier-checkbox"},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:e,"onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedSoldierTiers=e),onChange:t[3]||(t[3]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,40,Ht),[[s.lH,n.selectedSoldierTiers]]),(0,r.Lk)("span",{class:(0,l.C4)(`tier-badge tier-${e}`)},(0,l.v_)(e),3)])))),128))])])]),(0,r.Lk)("div",Jt,[t[19]||(t[19]=(0,r.Lk)("h6",{class:"filter-title text-light mb-2"},"Soldier ratings",-1)),(0,r.Lk)("div",qt,[(0,r.Lk)("div",Yt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.availableRatings,(e=>((0,r.uX)(),(0,r.CE)("label",{key:"soldier-rating-"+e,class:"rating-checkbox"},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:e,"onUpdate:modelValue":t[4]||(t[4]=e=>n.selectedSoldierRatings=e),onChange:t[5]||(t[5]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,40,Zt),[[s.lH,n.selectedSoldierRatings]]),(0,r.Lk)("span",{class:(0,l.C4)(`rating-badge rating-${e}`)},(0,l.v_)(e),3)])))),128))])])])]),(0,r.Lk)("div",ea,[(0,r.Lk)("div",ta,[t[20]||(t[20]=(0,r.Lk)("h6",{class:"filter-title text-light mb-2"},"Demoman tiers",-1)),(0,r.Lk)("div",aa,[(0,r.Lk)("div",sa,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.availableTiers,(e=>((0,r.uX)(),(0,r.CE)("label",{key:"demo-tier-"+e,class:"tier-checkbox"},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:e,"onUpdate:modelValue":t[6]||(t[6]=e=>n.selectedDemomanTiers=e),onChange:t[7]||(t[7]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,40,ra),[[s.lH,n.selectedDemomanTiers]]),(0,r.Lk)("span",{class:(0,l.C4)(`tier-badge tier-${e}`)},(0,l.v_)(e),3)])))),128))])])]),(0,r.Lk)("div",la,[t[21]||(t[21]=(0,r.Lk)("h6",{class:"filter-title text-light mb-2"},"Demoman ratings",-1)),(0,r.Lk)("div",oa,[(0,r.Lk)("div",na,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.availableRatings,(e=>((0,r.uX)(),(0,r.CE)("label",{key:"demo-rating-"+e,class:"rating-checkbox"},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:e,"onUpdate:modelValue":t[8]||(t[8]=e=>n.selectedDemomanRatings=e),onChange:t[9]||(t[9]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,40,ia),[[s.lH,n.selectedDemomanRatings]]),(0,r.Lk)("span",{class:(0,l.C4)(`rating-badge rating-${e}`)},(0,l.v_)(e),3)])))),128))])])])])]),(0,r.Lk)("div",ca,[(0,r.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>i.clearAllFilters&&i.clearAllFilters(...e)),class:"btn btn-secondary"}," Clear filters "),(0,r.Lk)("span",da,"Showing "+(0,l.v_)(i.filteredAndSortedItems.length)+" of "+(0,l.v_)(i.currentItems.length)+" items",1)])])]),t[30]||(t[30]=(0,r.Lk)("hr",{class:"row-divider",style:{width:"75%"}},null,-1)),n.loading?((0,r.uX)(),(0,r.CE)("div",ua,[(0,r.Lk)("div",ma,[(0,r.Lk)("span",pa,"Loading "+(0,l.v_)(n.currentView)+"...",1)])])):n.error?((0,r.uX)(),(0,r.CE)("div",ha,(0,l.v_)(n.error),1)):((0,r.uX)(),(0,r.CE)("div",ka,[(0,r.Lk)("div",ga,[(0,r.Lk)("button",{class:(0,l.C4)([{active:"maps"===n.currentView},"toggle-btn btn btn-dark update-button"]),onClick:t[11]||(t[11]=e=>i.switchView("maps")),style:{background:"var(--color-box)"}}," Maps ",2),(0,r.Lk)("button",{class:(0,l.C4)([{active:"courses"===n.currentView},"toggle-btn btn btn-dark update-button"]),onClick:t[12]||(t[12]=e=>i.switchView("courses")),style:{background:"var(--color-box)"}}," Courses ",2),(0,r.Lk)("button",{class:(0,l.C4)([{active:"bonuses"===n.currentView},"toggle-btn btn btn-dark update-button"]),onClick:t[13]||(t[13]=e=>i.switchView("bonuses")),style:{background:"var(--color-box)"}}," Bonuses ",2)]),(0,r.Lk)("div",ya,[(0,r.Lk)("table",va,[(0,r.Lk)("thead",ba,[(0,r.Lk)("tr",null,[t[26]||(t[26]=(0,r.Lk)("th",{style:{"vertical-align":"middle"}},"Name",-1)),(0,r.Lk)("th",{onClick:t[14]||(t[14]=e=>i.sortBy("soldier_tier")),class:"d-none d-sm-table-cell fixed-width"},[t[22]||(t[22]=(0,r.eW)(" Soldier tier ")),"soldier_tier"===n.sortField?((0,r.uX)(),(0,r.CE)("span",La,(0,l.v_)(i.getSortArrowSymbol("soldier_tier")),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("th",{onClick:t[15]||(t[15]=e=>i.sortBy("soldier_rating")),class:"d-none d-sm-table-cell fixed-width"},[t[23]||(t[23]=(0,r.eW)(" Soldier rating ")),"soldier_rating"===n.sortField?((0,r.uX)(),(0,r.CE)("span",fa,(0,l.v_)(i.getSortArrowSymbol("soldier_rating")),1)):(0,r.Q3)("",!0)]),t[27]||(t[27]=(0,r.Lk)("th",{class:"divider d-none d-sm-table-cell"},null,-1)),(0,r.Lk)("th",{onClick:t[16]||(t[16]=e=>i.sortBy("demoman_tier")),class:"d-none d-sm-table-cell fixed-width"},[t[24]||(t[24]=(0,r.eW)(" Demoman tier ")),"demoman_tier"===n.sortField?((0,r.uX)(),(0,r.CE)("span",Ca,(0,l.v_)(i.getSortArrowSymbol("demoman_tier")),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("th",{onClick:t[17]||(t[17]=e=>i.sortBy("demoman_rating")),class:"d-none d-sm-table-cell fixed-width"},[t[25]||(t[25]=(0,r.eW)(" Demoman rating ")),"demoman_rating"===n.sortField?((0,r.uX)(),(0,r.CE)("span",_a,(0,l.v_)(i.getSortArrowSymbol("demoman_rating")),1)):(0,r.Q3)("",!0)])])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.filteredAndSortedItems,((e,a)=>((0,r.uX)(),(0,r.CE)("tr",{ref_for:!0,ref:"tableRows",key:n.currentView+"-"+a,class:(0,l.C4)({"row-eliminated":n.eliminatedRows.has(i.getRowId(e,a)),"row-winner":n.pickerComplete&&!n.eliminatedRows.has(i.getRowId(e,a)),"row-eliminating":n.eliminatingRowId===i.getRowId(e,a)})},[(0,r.Lk)("td",{class:"align-middle map-name clickable",onClick:t=>i.goToRecords(e)},(0,l.v_)("maps"===n.currentView?e.name:`${e.map_name} (${e.index})`),9,wa),(0,r.Lk)("td",{class:(0,l.C4)(["align-middle text-center d-none d-sm-table-cell",`tier-color tier-${e.soldier_tier}`])}," T"+(0,l.v_)(e.soldier_tier),3),(0,r.Lk)("td",{class:(0,l.C4)(["align-middle text-center d-none d-sm-table-cell",`rating-color rating-${e.soldier_rating}`])}," R"+(0,l.v_)(e.soldier_rating),3),t[28]||(t[28]=(0,r.Lk)("td",{class:"divider d-none d-sm-table-cell"},null,-1)),(0,r.Lk)("td",{class:(0,l.C4)(["align-middle text-center d-none d-sm-table-cell",`tier-color tier-${e.demoman_tier}`])}," T"+(0,l.v_)(e.demoman_tier),3),(0,r.Lk)("td",{class:(0,l.C4)(["align-middle text-center d-none d-sm-table-cell",`rating-color rating-${e.demoman_rating}`])}," R"+(0,l.v_)(e.demoman_rating),3)],2)))),128))])])])]))])}const Ra=[1,2,3,4,5,6,7,8,9,10,0],Ia={name:"Maps",data(){return{maps:[],courses:[],bonuses:[],currentView:"maps",loading:!1,error:null,sortField:"soldier_tier",sortDirection:1,selectedSoldierTiers:[],selectedSoldierRatings:[],selectedDemomanTiers:[],selectedDemomanRatings:[],availableTiers:[1,2,3,4,5,6,7,8,9,10,0],availableRatings:[1,2,3,4],eliminatedRows:new Set,isPickerActive:!1,pickerComplete:!1,eliminatingRowId:null,shouldContinuePicker:!0}},mounted(){this.fetchData(),this.updateDocumentTitle()},computed:{currentItems(){switch(this.currentView){case"courses":return this.courses;case"bonuses":return this.bonuses;default:return this.maps}},currentTitle(){switch(this.currentView){case"courses":return"Courses";case"bonuses":return"Bonuses";default:return"Maps"}},filteredItems(){return this.currentItems.filter((e=>!(this.selectedSoldierTiers.length>0&&!this.selectedSoldierTiers.includes(e.soldier_tier))&&(!(this.selectedSoldierRatings.length>0&&!this.selectedSoldierRatings.includes(e.soldier_rating))&&(!(this.selectedDemomanTiers.length>0&&!this.selectedDemomanTiers.includes(e.demoman_tier))&&!(this.selectedDemomanRatings.length>0&&!this.selectedDemomanRatings.includes(e.demoman_rating))))))},filteredAndSortedItems(){return this.filteredItems.slice().sort(((e,t)=>{const a=e[this.sortField],s=t[this.sortField];if(["soldier_tier","demoman_tier"].includes(this.sortField)){const e=Ra.indexOf(a),t=Ra.indexOf(s),r=(e-t)*this.sortDirection;if(0!==r)return r}if(a<s)return-1*this.sortDirection;if(a>s)return 1*this.sortDirection;if("demoman_tier"===this.sortField){const a=e.demoman_rating,s=t.demoman_rating;if(a!==s)return(a-s)*this.sortDirection}else if("soldier_tier"===this.sortField){const a=e.soldier_rating,s=t.soldier_rating;if(a!==s)return(a-s)*this.sortDirection}const r=["soldier_tier","soldier_rating","demoman_tier","demoman_rating"].filter((e=>{const t=this.sortField.includes("soldier")?"soldier":"demoman";return e.includes(t)&&e!==this.sortField}));for(const l of r){const a=e[l],s=t[l];if(["soldier_tier","demoman_tier"].includes(l)){const e=Ra.indexOf(a),t=Ra.indexOf(s);if(e!==t)return e-t}else{if(a<s)return-1;if(a>s)return 1}}return 0}))},remainingCount(){return this.filteredAndSortedItems.length-this.eliminatedRows.size}},methods:{async switchView(e){this.currentView!==e&&(this.currentView=e,this.updateDocumentTitle(),this.sortField="soldier_tier",this.sortDirection=1,this.clearAllFilters(),this.resetPicker(),await this.fetchData())},async fetchData(){"maps"===this.currentView&&0===this.maps.length?await this.fetchMapsData():"courses"===this.currentView&&0===this.courses.length?await this.fetchCoursesData():"bonuses"===this.currentView&&0===this.bonuses.length&&await this.fetchBonusesData()},async fetchMapsData(){this.loading=!0,this.error=null;try{const e=await Dt.A.get("http://localhost:3000/maps");this.maps=e.data}catch(e){this.error="Error fetching maps data.",console.error("Error fetching maps data:",e)}finally{this.loading=!1}},async fetchCoursesData(){this.loading=!0,this.error=null;try{const e=await Dt.A.get("http://localhost:3000/maps/courses");this.courses=e.data}catch(e){this.error="Error fetching courses data.",console.error("Error fetching courses data:",e)}finally{this.loading=!1}},async fetchBonusesData(){this.loading=!0,this.error=null;try{const e=await Dt.A.get("http://localhost:3000/maps/bonuses");this.bonuses=e.data}catch(e){this.error="Error fetching bonuses data.",console.error("Error fetching bonuses data:",e)}finally{this.loading=!1}},async goToRecords(e){const t="maps"===this.currentView?e.id:e.map_id;console.log(`Navigating to more info for ${this.currentView}:`,t),this.$router.push({name:"Records",params:{mapId:t}})},sortBy(e){this.sortField===e?this.sortDirection*=-1:(this.sortField=e,this.sortDirection=1)},getSortArrowSymbol(e){return this.sortField!==e?"":1===this.sortDirection?"↑":"↓"},updateDocumentTitle(){document.title=`Tempus plaza - ${this.currentTitle}`},clearAllFilters(){this.selectedSoldierTiers=[],this.selectedSoldierRatings=[],this.selectedDemomanTiers=[],this.selectedDemomanRatings=[],this.resetPicker()},onFilterChange(){this.resetPicker()},getRowId(e,t){return`${this.currentView}-${e.id||e.map_id}-${t}`},async startRandomPicker(){if(this.isPickerActive||this.filteredAndSortedItems.length<=1)return;this.isPickerActive=!0,this.pickerComplete=!1,this.shouldContinuePicker=!0;const e=this.filteredAndSortedItems.length,t=5e3,a=t/(e-1);await this.eliminateRandomly(a)},async eliminateRandomly(e){if(!this.shouldContinuePicker)return;const t=this.filteredAndSortedItems.map(((e,t)=>({item:e,index:t,id:this.getRowId(e,t)}))).filter((e=>!this.eliminatedRows.has(e.id)));if(t.length<=1){if(this.isPickerActive=!1,this.pickerComplete=!0,1===t.length){await this.$nextTick();const e=t[0].index;this.$refs.tableRows[e].scrollIntoView({behavior:"smooth",block:"center"})}return}const a=Math.floor(Math.random()*t.length),s=t[a];this.eliminatingRowId=s.id,await new Promise((t=>setTimeout(t,e/2))),this.eliminatedRows.add(s.id),this.eliminatingRowId=null,await new Promise((t=>setTimeout(t,e/2))),await this.eliminateRandomly(e)},resetPicker(){this.eliminatedRows.clear(),this.shouldContinuePicker=!1,this.isPickerActive=!1,this.pickerComplete=!1,this.eliminatingRowId=null}}},Ea=(0,M.A)(Ia,[["render",xa],["__scopeId","data-v-13c65c9e"]]),Pa=Ea,Da={key:0,class:"text-center"},Ta={key:1,class:"alert alert-danger"},Sa={key:2,class:"container players-container py-4 d-flex flex-column align-items-center bg-dark-custom"},Xa={class:"category-tabs-container my-4"},$a={class:"category-tabs"},Fa=["onClick"],Aa={class:"subcategory-container my-3"},Ma={class:"subcategory-pills"},Ga={class:"pill-row"},Va=["onClick"],Na={class:"pill-row"},Ba=["onClick"],Oa={key:1,class:"pill-row"},Qa=["onClick"],Ua={class:"tables-wrapper d-flex flex-column flex-md-row justify-content-center"},Ka={class:"table-wrapper"},ja={class:"header-content",style:{background:"linear-gradient(\r\n              90deg,\r\n              var(--color-primary),\r\n              var(--color-box)\r\n            )"}},Wa={class:"header-text"},za={class:"header-title"},Ha={class:"table-responsive"},Ja={class:"table table-dark"},qa={class:"rank-column"},Ya=["onClick"],Za=["src"],es={class:"points-column"},ts={class:"footer"},as=["disabled"],ss={key:0},rs={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ls={class:"table-wrapper"},os={class:"header-content",style:{background:"linear-gradient(\r\n              90deg,\r\n              var(--color-primary),\r\n              var(--color-box)\r\n            )"}},ns={class:"header-text"},is={class:"header-title"},cs={class:"table-responsive"},ds={class:"table table-dark"},us={class:"rank-column"},ms=["onClick"],ps=["src"],hs={class:"footer"},ks=["disabled"],gs={key:0},ys={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function vs(e,t,a,s,o,n){return e.loading&&e.initialLoad?((0,r.uX)(),(0,r.CE)("div",Da,t[2]||(t[2]=[(0,r.Lk)("div",{class:"spinner-border text-light",role:"status",style:{"margin-top":"100px"}},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading players...")],-1)]))):e.error?((0,r.uX)(),(0,r.CE)("div",Ta,(0,l.v_)(e.error),1)):((0,r.uX)(),(0,r.CE)("div",Sa,[t[10]||(t[10]=(0,r.Lk)("h1",{class:"text-center players-title"},"Tempus top players",-1)),t[11]||(t[11]=(0,r.Lk)("hr",{class:"row-divider",style:{width:"75%"}},null,-1)),(0,r.Lk)("div",Xa,[(0,r.Lk)("div",$a,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.categoryNames,(t=>((0,r.uX)(),(0,r.CE)("button",{key:t,class:(0,l.C4)(["category-tab",{active:e.selectedCategory===t}]),onClick:e=>n.selectCategory(t)},(0,l.v_)(e.categoryDisplayNames[t]||n.capitalize(t)),11,Fa)))),128))])]),(0,r.Lk)("div",Aa,[(0,r.Lk)("div",Ma,[n.hasCountSubmenu(e.selectedCategory)?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.Lk)("div",Ga,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.dropdowns[e.selectedCategory],(t=>((0,r.uX)(),(0,r.CE)("button",{key:t,class:(0,l.C4)(["subcategory-pill",{active:e.selectedItem===t&&e.points}]),onClick:a=>n.selectItem(e.selectedCategory,t)},(0,l.v_)(t),11,Va)))),128))]),(0,r.Lk)("div",Na,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.getCountItems(e.selectedCategory),(a=>((0,r.uX)(),(0,r.CE)("button",{key:a+"-count",class:(0,l.C4)(["subcategory-pill count-pill",{active:e.selectedItem===a+" (count)"&&!e.points}]),onClick:t=>n.selectItem(e.selectedCategory,a+" (count)")},[(0,r.eW)((0,l.v_)(a)+" ",1),t[3]||(t[3]=(0,r.Lk)("span",{class:"count-badge"},"count",-1))],10,Ba)))),128))])],64)):((0,r.uX)(),(0,r.CE)("div",Oa,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.dropdowns[e.selectedCategory],(t=>((0,r.uX)(),(0,r.CE)("button",{key:t,class:(0,l.C4)(["subcategory-pill",{active:e.selectedItem===t}]),onClick:a=>n.selectItem(e.selectedCategory,t)},(0,l.v_)(t),11,Qa)))),128))]))])]),t[12]||(t[12]=(0,r.Lk)("hr",{class:"row-divider",style:{width:"75%"}},null,-1)),(0,r.Lk)("div",Ua,[(0,r.Lk)("div",Ka,[(0,r.Lk)("div",ja,[t[4]||(t[4]=(0,r.Lk)("img",{src:"/icons/soldier.png",alt:"Soldier Icon",class:"class-icon"},null,-1)),(0,r.Lk)("div",Wa,[(0,r.Lk)("p",za,(0,l.v_)(e.categoryDisplayNames[e.selectedCategory]||n.capitalize(e.selectedCategory))+" - "+(0,l.v_)(e.selectedItem),1)])]),(0,r.Lk)("div",Ha,[(0,r.Lk)("table",Ja,[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[t[5]||(t[5]=(0,r.Lk)("th",null,"Rank",-1)),t[6]||(t[6]=(0,r.Lk)("th",null,"Player",-1)),(0,r.Lk)("th",null,(0,l.v_)(e.points?"Points":"Count"),1)])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.displayedSoldierPlayers,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:"soldier-"+e.id},[(0,r.Lk)("td",qa,"#"+(0,l.v_)(t+1),1),(0,r.Lk)("td",{class:"name-cell align-middle player-name clickable name-column",onClick:t=>n.goToPlayer(e.player_id)},[(0,r.Lk)("img",{src:`${e.steam_avatar}`,alt:"Steam Avatar",class:"avatar",onerror:"this.src='/avatars/golly.jpg'"},null,8,Za),(0,r.eW)(" "+(0,l.v_)(e.name),1)],8,Ya),(0,r.Lk)("td",es,(0,l.v_)(e.amount),1)])))),128))])])]),(0,r.Lk)("div",ts,[(0,r.Lk)("button",{class:"btn btn-dark update-button",style:{background:"var(--color-primary)","font-weight":"bold",width:"100%"},onClick:t[0]||(t[0]=(...e)=>n.loadMoreSoldiers&&n.loadMoreSoldiers(...e)),disabled:e.loadingSoldiers},[e.loadingSoldiers?((0,r.uX)(),(0,r.CE)("span",rs)):((0,r.uX)(),(0,r.CE)("span",ss,"Show more"))],8,as)])]),(0,r.Lk)("div",ls,[(0,r.Lk)("div",os,[t[7]||(t[7]=(0,r.Lk)("img",{src:"/icons/demoman.png",alt:"Demoman Icon",class:"class-icon"},null,-1)),(0,r.Lk)("div",ns,[(0,r.Lk)("p",is,(0,l.v_)(e.categoryDisplayNames[e.selectedCategory]||n.capitalize(e.selectedCategory))+" - "+(0,l.v_)(e.selectedItem),1)])]),(0,r.Lk)("div",cs,[(0,r.Lk)("table",ds,[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[t[8]||(t[8]=(0,r.Lk)("th",null,"Rank",-1)),t[9]||(t[9]=(0,r.Lk)("th",null,"Player",-1)),(0,r.Lk)("th",null,(0,l.v_)(e.points?"Points":"Count"),1)])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.displayedDemomanPlayers,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:"demoman-"+e.id},[(0,r.Lk)("td",us,"#"+(0,l.v_)(t+1),1),(0,r.Lk)("td",{class:"name-cell align-middle player-name clickable name-column",onClick:t=>n.goToPlayer(e.player_id)},[(0,r.Lk)("img",{src:`${e.steam_avatar}`,alt:"Avatar",class:"avatar",onerror:"this.src='/avatars/golly.jpg'"},null,8,ps),(0,r.eW)(" "+(0,l.v_)(e.name),1)],8,ms),(0,r.Lk)("td",null,(0,l.v_)(e.amount),1)])))),128))])])]),(0,r.Lk)("div",hs,[(0,r.Lk)("button",{class:"btn btn-dark update-button",style:{background:"var(--color-primary)","font-weight":"bold",width:"100%"},onClick:t[1]||(t[1]=(...e)=>n.loadMoreDemomen&&n.loadMoreDemomen(...e)),disabled:e.loadingDemomen},[e.loadingDemomen?((0,r.uX)(),(0,r.CE)("span",ys)):((0,r.uX)(),(0,r.CE)("span",gs,"Show more"))],8,ks)])])])]))}const bs={name:"Players",data:()=>({soldierPlayers:[],demomanPlayers:[],loading:!1,loadingSoldiers:!1,loadingDemomen:!1,initialLoad:!0,error:null,points:!0,selectedCategory:"points",selectedItem:"Combined",dropdowns:{points:[],wrs:[],tts:[],groups:[],ratings:[],tiers:[]},categoryNames:["points","wrs","tts","groups","ratings","tiers"],categoryDisplayNames:{wrs:"World records",tts:"Top times",points:"Points",groups:"Groups",ratings:"Ratings (maps)",tiers:"Tiers"},currentSoldierIndex:50,currentDemomanIndex:50}),watch:{$route(e,t){this.initializeFromRoute()}},mounted(){document.title="Tempus plaza - Players",this.fillDropdowns(),this.initializeFromRoute()},computed:{formattedHeaderTitle(){return this.selectedCategory.charAt(0).toUpperCase()+this.selectedCategory.slice(1)},displayedSoldierPlayers(){return this.soldierPlayers.slice(0,this.currentSoldierIndex)},displayedDemomanPlayers(){return this.demomanPlayers.slice(0,this.currentDemomanIndex)}},methods:{selectCategory(e){this.selectedCategory=e;const t=this.dropdowns[e][0];this.selectItem(e,t)},initializeFromRoute(){const e=this.$route.params.category||"points",t=this.$route.params.item||"Combined";this.categoryNames.includes(e)?(this.selectedCategory=e,this.selectedItem=decodeURIComponent(t),this.points=!this.selectedItem.includes("(count)"),this.fetchDataForCurrentSelection(0)):this.updateRoute("points","Combined")},updateRoute(e,t){const a=encodeURIComponent(t);this.$route.params.category===e&&this.$route.params.item===a||this.$router.push({name:"Players",params:{category:e,item:a}}).catch((e=>{"NavigationDuplicated"!==e.name&&console.error("Navigation error:",e)}))},loadMoreDemomen(){this.loadingDemomen=!0,this.currentDemomanIndex+=50,this.fetchDataForCurrentSelection(this.currentDemomanIndex)},loadMoreSoldiers(){this.loadingSoldiers=!0,this.currentSoldierIndex+=50,this.fetchDataForCurrentSelection(this.currentSoldierIndex)},fetchDataForCurrentSelection(e){const t=this.selectedCategory,a=this.selectedItem;let s=t,r=a.replace(/\s+/g,"").toLowerCase().replace(/\s*combined\s*/gi,"total"),l="points";if(r.includes("(count)")&&(r=r.replace("(count)",""),l="count",this.points=!1),"ratings"===s){const e=r.replace(/rating(\d+)/g,((e,t)=>`r${t}s`));s=e,r="maps"}else if("groups"===s){if("groups"===r)return void this.fetchPlayers(r,"total",l,e);{const e=r.replace(/group(\d+)/g,((e,t)=>`g${t}s`));s=e,r="total"}}"tiers"===s&&(l="total"),this.fetchPlayers(s,r,l,e)},fillDropdowns(){this.dropdowns.points=["Combined","Maps","Courses","Bonuses"],this.dropdowns.wrs=["Combined","Maps","Courses","Bonuses"],this.dropdowns.tts=["Combined","Maps","Courses","Bonuses"],this.dropdowns.groups=["Groups","Group 1","Group 2","Group 3","Group 4"],this.dropdowns.ratings=["Rating 1","Rating 2","Rating 3"],this.dropdowns.tiers=["Tier 1","Tier 2","Tier 3","Tier 4","Tier 5","Tier 6","Tier 7","Tier 8","Tier 9","Tier 10"]},capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},getCountItems(e){return"groups"===e?this.dropdowns[e].filter((e=>"Groups"!==e)):this.dropdowns[e]},selectItem(e,t){this.points=!0,this.selectedCategory=e,this.selectedItem=t,this.updateRoute(e,t),this.dropdownOpen=!1,this.hoveredCategory=null},hasCountSubmenu(e){return["wrs","tts","groups"].includes(e)},async fetchPlayers(e,t,a,s){this.initialLoad&&(this.loading=!0);try{const r=await Dt.A.get(`http://localhost:3000/players/${e}/${t}/${a}/${s}`),l=r.data;0===s?(this.soldierPlayers=l[0],this.demomanPlayers=l[1]):(this.soldierPlayers=[...this.soldierPlayers,...l[0]],this.demomanPlayers=[...this.demomanPlayers,...l[1]])}catch(r){console.error("Error fetching players")}finally{this.loading=!1,this.loadingSoldiers=!1,this.loadingDemomen=!1,this.initialLoad=!1}},async fetchPlayersData(e,t){this.initialLoad&&(this.loading=!0);try{const a=await Dt.A.get(`http://localhost:3000/players/${e}/${t}`),s=a.data;0===t?(this.soldierPlayers=s[0],this.demomanPlayers=s[1]):(this.soldierPlayers=[...this.soldierPlayers,...s[0]],this.demomanPlayers=[...this.demomanPlayers,...s[1]])}catch(a){console.error("Error fetching players groups")}finally{this.loading=!1,this.loadingSoldiers=!1,this.loadingDemomen=!1,this.initialLoad=!1}},async goToPlayer(e){this.$router.push({name:"PlayerPage",params:{playerId:e}})}}},Ls=(0,M.A)(bs,[["render",vs],["__scopeId","data-v-488ac2c0"]]),fs=Ls,Cs={class:"container player-page py-4",style:{background:"var(--color-background)"}},_s={key:0,class:"alert alert-warning player-not-found text-center"},ws={key:1},xs={key:0,class:"card profile-banner mb-4 shadow",style:{background:"linear-gradient(\r\n            135deg,\r\n            var(--color-primary),\r\n            var(--color-box)\r\n          )",border:"1px solid rgba(42, 42, 42, 0.99)"}},Rs={key:0,class:"text-center"},Is={class:"row g-0",style:{height:"100%",display:"flex","align-items":"center"}},Es={class:"col-md-4 d-flex flex-column align-items-center profile-left p-4",style:{height:"100%"}},Ps=["src"],Ds={class:"profile-info text-center"},Ts={key:0,class:"player-name"},Ss={class:"rank-name mb-2"},Xs={class:"country mb-3",style:{"font-weight":"bold",color:"#d5d5d5"}},$s=["src"],Fs={class:"col-md-8 d-flex align-items-center profile-right"},As={class:"row p-3 profile-overview"},Ms={class:"col-md-4 mb-3"},Gs={class:"card stat-block h-100"},Vs={class:"card-body text-center"},Ns={class:"card-text player-stats"},Bs={class:"col-md-4 mb-3"},Os={class:"card stat-block h-100"},Qs={class:"card-body text-center"},Us={class:"card-text player-stats"},Ks={class:"col-md-4 mb-3"},js={class:"card stat-block h-100"},Ws={class:"card-body text-center"},zs={class:"card-text player-stats"},Hs={class:"col-md-4 mb-3"},Js={class:"card stat-block h-100"},qs={class:"card-body text-center"},Ys={class:"card-text player-stats"},Zs={class:"col-md-4 mb-3"},er={class:"card stat-block h-100"},tr={class:"card-body text-center"},ar={class:"card-text player-stats"},sr={class:"col-md-4 mb-3"},rr={class:"card stat-block h-100"},lr={class:"card-body text-center"},or={class:"card-text player-stats"},nr={class:"row main-content-wrapper"},ir={class:"col-md-3 stats-boxes"},cr={class:"stats-container"},dr={class:"class-section"},ur={class:"card stat-block mb-3"},mr={class:"card-body"},pr={key:0,class:"text-center"},hr={key:1},kr={class:"row card-row"},gr={class:"col-md-12 text-center mb-3 stat-item"},yr={class:"card-text player-stats"},vr={class:"col-md-6 text-center mb-3 stat-item"},br={class:"card-text player-stats"},Lr={class:"col-md-6 text-center mb-3 stat-item"},fr={class:"card-text player-stats"},Cr={class:"col-md-3 text-center stat-item"},_r={class:"card-text player-stats"},wr={class:"col-md-3 text-center stat-item"},xr={class:"card-text player-stats"},Rr={class:"col-md-3 text-center stat-item"},Ir={class:"card-text player-stats"},Er={class:"col-md-3 text-center stat-item"},Pr={class:"card-text player-stats"},Dr={class:"class-section"},Tr={class:"section-header"},Sr={class:"card stat-block mb-3"},Xr={class:"card-body"},$r={class:"row card-row"},Fr={key:0,class:"text-center"},Ar={key:1},Mr=["onClick"],Gr={class:"card-title clickable-text"},Vr={class:"card-text player-stats"},Nr={class:"col-md-6 tabs-container"},Br={class:"card",style:{border:"none",background:"var(--color-dark)","box-shadow":"0 4px 10px rgba(0, 0, 0, 0.3)","padding-top":"15px"}},Or={class:"card-header tabs-header text-white",style:{background:"var(--color-dark)",border:"none"}},Qr={class:"button-group"},Ur=["onClick"],Kr={class:"card-body tabs-content",style:{background:"var(--color-dark)"}},jr={class:"records-section"},Wr={key:0,class:"text-center"},zr={key:1,class:"list-group"},Hr=["onClick"],Jr={class:"d-flex align-items-center record-class-map"},qr=["src","alt"],Yr={class:"ms-2 record-map"},Zr={key:0},el={class:"text-end align-items-center record-time-detail"},tl={class:"d-flex flex-column align-items-end"},al={class:"d-flex align-items-center gap-2"},sl={class:"record-detail record-date"},rl={class:"col-md-3 stats-boxes"},ll={class:"stats-container"},ol={class:"class-section"},nl={class:"card stat-block mb-3"},il={class:"card-body"},cl={key:0,class:"text-center"},dl={key:1},ul={class:"row card-row"},ml={class:"col-md-12 text-center mb-3 stat-item"},pl={class:"card-text player-stats"},hl={class:"col-md-6 text-center mb-3 stat-item"},kl={class:"card-text player-stats"},gl={class:"col-md-6 text-center mb-3 stat-item"},yl={class:"card-text player-stats"},vl={class:"col-md-3 text-center stat-item"},bl={class:"card-text player-stats"},Ll={class:"col-md-3 text-center stat-item"},fl={class:"card-text player-stats"},Cl={class:"col-md-3 text-center stat-item"},_l={class:"card-text player-stats"},wl={class:"col-md-3 text-center stat-item"},xl={class:"card-text player-stats"},Rl={class:"class-section"},Il={class:"section-header"},El={class:"card stat-block mb-3"},Pl={class:"card-body"},Dl={class:"row card-row"},Tl={key:0,class:"text-center"},Sl={key:1},Xl=["onClick"],$l={class:"card-title clickable-text"},Fl={class:"card-text player-stats"};function Al(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("div",Cs,[e.playerNotFound?((0,r.uX)(),(0,r.CE)("div",_s,[t[3]||(t[3]=(0,r.Lk)("p",{class:"mb-3"},"No player found",-1)),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.returnToAllPlayers&&n.returnToAllPlayers(...e)),class:"btn return-button"}," Return to all players ")])):((0,r.uX)(),(0,r.CE)("div",ws,[e.player?((0,r.uX)(),(0,r.CE)("div",xs,[e.loading.ranks?((0,r.uX)(),(0,r.CE)("div",Rs,t[4]||(t[4]=[(0,r.Lk)("div",{class:"spinner-border text-light",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading records...")],-1)]))):(0,r.Q3)("",!0),(0,r.Lk)("div",Is,[(0,r.Lk)("div",Es,[(0,r.Lk)("img",{src:`${e.player.steam_avatar}`,alt:"Avatar",class:"rounded-circle avatar mb-3",onerror:"this.src='/avatars/golly.jpg'"},null,8,Ps),(0,r.Lk)("div",Ds,[e.player.name?((0,r.uX)(),(0,r.CE)("h1",Ts,(0,l.v_)(e.player.name),1)):(0,r.Q3)("",!0),(0,r.Lk)("p",Ss,[t[5]||(t[5]=(0,r.Lk)("span",{style:{color:"var(--color-text-soft)"}},"[",-1)),(0,r.Lk)("span",{class:(0,l.C4)(n.getRankName(n.getHighestRank(),e.player.gender).color)},(0,l.v_)(n.getRankName(n.getHighestRank(),e.player.gender).title),3),t[6]||(t[6]=(0,r.Lk)("span",{style:{color:"var(--color-text-soft)"}},"]",-1))]),(0,r.Lk)("p",Xs,[(0,r.Lk)("img",{src:n.getFlagImageUrl(e.player.country_code),alt:"flag",class:"flag-icon",onError:t[1]||(t[1]=(...e)=>n.handleImageError&&n.handleImageError(...e))},null,40,$s),(0,r.eW)(" "+(0,l.v_)(e.player.country)+" ("+(0,l.v_)(e.player.country_code)+") ",1)])])]),(0,r.Lk)("div",Fs,[(0,r.Lk)("div",As,[(0,r.Lk)("div",Ms,[(0,r.Lk)("div",Gs,[(0,r.Lk)("div",Vs,[t[7]||(t[7]=(0,r.Lk)("h3",{class:"card-title"},"Overall rank",-1)),(0,r.Lk)("p",Ns," #"+(0,l.v_)(e.player.overall_rank),1)])])]),(0,r.Lk)("div",Bs,[(0,r.Lk)("div",Os,[(0,r.Lk)("div",Qs,[t[8]||(t[8]=(0,r.Lk)("h3",{class:"card-title"},"Soldier rank",-1)),(0,r.Lk)("p",Us," #"+(0,l.v_)(e.player.soldier_rank),1)])])]),(0,r.Lk)("div",Ks,[(0,r.Lk)("div",js,[(0,r.Lk)("div",Ws,[t[9]||(t[9]=(0,r.Lk)("h3",{class:"card-title"},"Demoman rank",-1)),(0,r.Lk)("p",zs," #"+(0,l.v_)(e.player.demoman_rank),1)])])]),(0,r.Lk)("div",Hs,[(0,r.Lk)("div",Js,[(0,r.Lk)("div",qs,[t[10]||(t[10]=(0,r.Lk)("h3",{class:"card-title"},"Overall points",-1)),(0,r.Lk)("p",Ys,(0,l.v_)(e.player.overall_points),1)])])]),(0,r.Lk)("div",Zs,[(0,r.Lk)("div",er,[(0,r.Lk)("div",tr,[t[11]||(t[11]=(0,r.Lk)("h3",{class:"card-title"},"Soldier points",-1)),(0,r.Lk)("p",ar,(0,l.v_)(e.player.soldier_points),1)])])]),(0,r.Lk)("div",sr,[(0,r.Lk)("div",rr,[(0,r.Lk)("div",lr,[t[12]||(t[12]=(0,r.Lk)("h3",{class:"card-title"},"Demoman points",-1)),(0,r.Lk)("p",or,(0,l.v_)(e.player.demoman_points),1)])])])])])])])):(0,r.Q3)("",!0),(0,r.Lk)("div",nr,[(0,r.Lk)("div",ir,[(0,r.Lk)("div",cr,[(0,r.Lk)("div",dr,[t[21]||(t[21]=(0,r.Lk)("h3",{class:"section-header"},"Soldier stats (map)",-1)),(0,r.Lk)("div",ur,[(0,r.Lk)("div",mr,[e.loading.stats?((0,r.uX)(),(0,r.CE)("div",pr,t[13]||(t[13]=[(0,r.Lk)("div",{class:"spinner-border text-light",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):((0,r.uX)(),(0,r.CE)("div",hr,[(0,r.Lk)("div",kr,[(0,r.Lk)("div",gr,[t[14]||(t[14]=(0,r.Lk)("h4",{class:"card-title"},"Completion",-1)),(0,r.Lk)("p",yr,(0,l.v_)(e.stats.map.completion.soldier)+"% ",1)]),(0,r.Lk)("div",vr,[t[15]||(t[15]=(0,r.Lk)("h6",{class:"card-title"},"World records",-1)),(0,r.Lk)("p",br,(0,l.v_)(e.stats.map.worldRecordAmount.soldier),1)]),(0,r.Lk)("div",Lr,[t[16]||(t[16]=(0,r.Lk)("h6",{class:"card-title"},"Top times",-1)),(0,r.Lk)("p",fr,(0,l.v_)(e.stats.map.topTimesAmount.soldier),1)]),(0,r.Lk)("div",Cr,[t[17]||(t[17]=(0,r.Lk)("h6",{class:"card-title"},"G1",-1)),(0,r.Lk)("p",_r,(0,l.v_)(e.stats.map.placement.soldier.G1),1)]),(0,r.Lk)("div",wr,[t[18]||(t[18]=(0,r.Lk)("h6",{class:"card-title"},"G2",-1)),(0,r.Lk)("p",xr,(0,l.v_)(e.stats.map.placement.soldier.G2),1)]),(0,r.Lk)("div",Rr,[t[19]||(t[19]=(0,r.Lk)("h6",{class:"card-title"},"G3",-1)),(0,r.Lk)("p",Ir,(0,l.v_)(e.stats.map.placement.soldier.G3),1)]),(0,r.Lk)("div",Er,[t[20]||(t[20]=(0,r.Lk)("h6",{class:"card-title"},"G4",-1)),(0,r.Lk)("p",Pr,(0,l.v_)(e.stats.map.placement.soldier.G4),1)])])]))])])]),(0,r.Lk)("div",Dr,[(0,r.Lk)("h5",Tr,(0,l.v_)(e.player.shared_soldier_type),1),(0,r.Lk)("div",Sr,[(0,r.Lk)("div",Xr,[(0,r.Lk)("div",$r,[e.loading.shared?((0,r.uX)(),(0,r.CE)("div",Fr,t[22]||(t[22]=[(0,r.Lk)("div",{class:"spinner-border text-light",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):((0,r.uX)(),(0,r.CE)("div",Ar,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.sharedTimesSoldier,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"col-md-12 text-center mb-3 stat-item clickable",onClick:t=>n.goToPlayer(e.playerId)},[(0,r.Lk)("h6",Gr,(0,l.v_)(e.playerName),1),(0,r.Lk)("p",Vr,(0,l.v_)(e.count),1)],8,Mr)))),128))]))])])])])])]),(0,r.Lk)("div",Nr,[(0,r.Lk)("div",Br,[(0,r.Lk)("div",Or,[(0,r.Lk)("div",Qr,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.tabs,((t,a)=>((0,r.uX)(),(0,r.CE)("button",{key:a,onClick:a=>e.currentTab=t,class:(0,l.C4)(["toggle-btn btn",{active:e.currentTab===t,"btn-dark":!0}]),style:{color:"var(--color-text)",border:"1px solid var(--color-border-soft)","font-weight":"bold"}},(0,l.v_)(t),11,Ur)))),128))])]),(0,r.Lk)("div",Kr,[(0,r.Lk)("div",jr,[e.loading[e.currentTab]?((0,r.uX)(),(0,r.CE)("div",Wr,t[23]||(t[23]=[(0,r.Lk)("div",{class:"spinner-border text-light",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading records...")],-1)]))):((0,r.uX)(),(0,r.CE)("ul",zr,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.currentRecords,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,class:"list-group-item record-item",style:{background:"var(--color-box)"},onClick:t=>n.goToRecords(e.map_id)},[(0,r.Lk)("div",Jr,[(0,r.Lk)("img",{src:`/icons/${e.class}.png`,alt:e.class,class:"class-icon",loading:"lazy"},null,8,qr),(0,r.Lk)("span",Yr,[(0,r.eW)((0,l.v_)(e.map_name)+" ",1),"map"!==e.type?((0,r.uX)(),(0,r.CE)("span",Zr," - "+(0,l.v_)(e.type)+" "+(0,l.v_)(e.index),1)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",el,[(0,r.Lk)("div",tl,[(0,r.Lk)("div",al,[(0,r.Lk)("span",{class:(0,l.C4)(["record-detail record-duration",[e.rank>=1&&e.rank<=3?n.getPlacementClass(e.rank):""]])},(0,l.v_)(n.formatDuration(e.duration)),3),(0,r.Lk)("span",{class:(0,l.C4)(["record-rank",n.getPlacementClass(e.placement)])},(0,l.v_)(n.getMedal(e.rank))+" #"+(0,l.v_)(e.rank),3)]),(0,r.Lk)("span",sl,(0,l.v_)(n.formatDate(e.date)),1)])])],8,Hr)))),128))])),n.canShowMore?((0,r.uX)(),(0,r.CE)("button",{key:2,onClick:t[2]||(t[2]=(...e)=>n.loadMoreRecords&&n.loadMoreRecords(...e)),class:"btn btn-dark update-button"}," Show More ")):(0,r.Q3)("",!0)])])])]),(0,r.Lk)("div",rl,[(0,r.Lk)("div",ll,[(0,r.Lk)("div",ol,[t[32]||(t[32]=(0,r.Lk)("h3",{class:"section-header"},"Demoman stats (map)",-1)),(0,r.Lk)("div",nl,[(0,r.Lk)("div",il,[e.loading.stats?((0,r.uX)(),(0,r.CE)("div",cl,t[24]||(t[24]=[(0,r.Lk)("div",{class:"spinner-border text-light",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):((0,r.uX)(),(0,r.CE)("div",dl,[(0,r.Lk)("div",ul,[(0,r.Lk)("div",ml,[t[25]||(t[25]=(0,r.Lk)("h4",{class:"card-title"},"Completion",-1)),(0,r.Lk)("p",pl,(0,l.v_)(e.stats.map.completion.demoman)+"% ",1)]),(0,r.Lk)("div",hl,[t[26]||(t[26]=(0,r.Lk)("h6",{class:"card-title"},"World records",-1)),(0,r.Lk)("p",kl,(0,l.v_)(e.stats.map.worldRecordAmount.demoman),1)]),(0,r.Lk)("div",gl,[t[27]||(t[27]=(0,r.Lk)("h6",{class:"card-title"},"Top times",-1)),(0,r.Lk)("p",yl,(0,l.v_)(e.stats.map.topTimesAmount.demoman),1)]),(0,r.Lk)("div",vl,[t[28]||(t[28]=(0,r.Lk)("h6",{class:"card-title"},"G1",-1)),(0,r.Lk)("p",bl,(0,l.v_)(e.stats.map.placement.demoman.G1),1)]),(0,r.Lk)("div",Ll,[t[29]||(t[29]=(0,r.Lk)("h6",{class:"card-title"},"G2",-1)),(0,r.Lk)("p",fl,(0,l.v_)(e.stats.map.placement.demoman.G2),1)]),(0,r.Lk)("div",Cl,[t[30]||(t[30]=(0,r.Lk)("h6",{class:"card-title"},"G3",-1)),(0,r.Lk)("p",_l,(0,l.v_)(e.stats.map.placement.demoman.G3),1)]),(0,r.Lk)("div",wl,[t[31]||(t[31]=(0,r.Lk)("h6",{class:"card-title"},"G4",-1)),(0,r.Lk)("p",xl,(0,l.v_)(e.stats.map.placement.demoman.G4),1)])])]))])])]),(0,r.Lk)("div",Rl,[(0,r.Lk)("h5",Il,(0,l.v_)(e.player.shared_demoman_type),1),(0,r.Lk)("div",El,[(0,r.Lk)("div",Pl,[(0,r.Lk)("div",Dl,[e.loading.shared?((0,r.uX)(),(0,r.CE)("div",Tl,t[33]||(t[33]=[(0,r.Lk)("div",{class:"spinner-border text-light",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):((0,r.uX)(),(0,r.CE)("div",Sl,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.sharedTimesDemoman,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"col-md-12 text-center mb-3 stat-item clickable",onClick:t=>n.goToPlayer(e.playerId)},[(0,r.Lk)("h6",$l,(0,l.v_)(e.playerName),1),(0,r.Lk)("p",Fl,(0,l.v_)(e.count),1)],8,Xl)))),128))]))])])])])])])])]))])}const Ml="http://localhost:3000",Gl={name:"PlayerPage",props:{playerId:{type:Number,required:!0}},data:()=>({player:{id:null,steamid:null,avatar:null,name:null,country:"unknown",country_code:"unknown",overall_rank:null,soldier_rank:null,demoman_rank:null,overall_points:null,soldier_points:null,demoman_points:null,rank_name:null,gender:"male",launcher_pref:1,rank_pref:"overall",shared_soldier_type:"",shared_demoman_type:""},launcherOptions:[{value:1,icon:"/icons/rocketlauncher.png"},{value:2,icon:"/icons/cowmangler.png"},{value:3,icon:"/icons/original.png"}],showLauncherMenu:!1,rankOptions:[{value:1,label:"Overall Rank"},{value:2,label:"Soldier Rank"},{value:3,label:"Demoman Rank"}],showRankMenu:!1,records:{recentRecords:[],topTimes:[],worldRecords:[]},recordsDisplayed:{"Latest runs":11,"Latest top times":11,"Latest world records":11},tabs:["Latest runs","Latest top times","Latest world records"],currentTab:"Latest runs",loading:{"Latest runs":!0,"Latest top times":!0,"Latest world records":!0,shared:!0,ranks:!0,stats:!0},playerNotFound:!1,stats:{total:{completion:{soldier:0,demoman:0},worldRecordAmount:{soldier:0,demoman:0},topTimesAmount:{soldier:0,demoman:0},placement:{soldier:{G1:0,G2:0,G3:0,G4:0},demoman:{G1:0,G2:0,G3:0,G4:0}}},map:{completion:{soldier:0,demoman:0},worldRecordAmount:{soldier:0,demoman:0},topTimesAmount:{soldier:0,demoman:0},placement:{soldier:{G1:0,G2:0,G3:0,G4:0},demoman:{G1:0,G2:0,G3:0,G4:0}}},course:{completion:{soldier:0,demoman:0},worldRecordAmount:{soldier:0,demoman:0},topTimesAmount:{soldier:0,demoman:0},placement:{soldier:{G1:0,G2:0,G3:0,G4:0},demoman:{G1:0,G2:0,G3:0,G4:0}}},bonus:{completion:{soldier:0,demoman:0},worldRecordAmount:{soldier:0,demoman:0},topTimesAmount:{soldier:0,demoman:0},placement:{soldier:{G1:0,G2:0,G3:0,G4:0},demoman:{G1:0,G2:0,G3:0,G4:0}}}},sharedTimesSoldier:[],sharedTimesDemoman:[]}),computed:{currentRecords(){const e=this.currentTab;return"Latest runs"===e?this.records.recentRecords.slice(0,this.recordsDisplayed[e]):"Latest top times"===e?this.records.topTimes.slice(0,this.recordsDisplayed[e]):"Latest world records"===e?this.records.worldRecords.slice(0,this.recordsDisplayed[e]):[]},canShowMore(){const e=this.currentTab;let t;return"Latest runs"===e?t=this.records.recentRecords:"Latest top times"===e?t=this.records.topTimes:"Latest world records"===e&&(t=this.records.worldRecords),t&&this.recordsDisplayed[e]<t.length}},async mounted(){await Promise.all([this.fetchUserData(this.playerId),this.fetchPlayerData(this.playerId),this.fetchPlayerRanks(this.playerId),this.fetchPlayerStats(this.playerId),this.fetchRecentRecords(this.playerId),this.fetchSharedTimes(this.playerId)])},watch:{playerId:{immediate:!1,handler(e,t){e!==t&&(this.playerNotFound=!1,this.loading={...this.loading,ranks:!0,stats:!0,shared:!0,"Latest runs":!0,"Latest top times":!0,"Latest world records":!0},this.recordsDisplayed={...this.recordsDisplayed,"Latest runs":11,"Latest top times":11,"Latest world records":11},this.fetchPlayerData(e),this.fetchPlayerRanks(e),this.fetchPlayerStats(e),this.fetchRecentRecords(e),this.fetchSharedTimes(e))}}},methods:{loadMoreRecords(){const e=this.currentTab;this.canShowMore&&(this.recordsDisplayed[e]+=10)},goToRecords(e){console.log("Navigating to records with mapId:",e),this.$router.push({name:"Records",params:{mapId:e}})},goToPlayer(e){console.log("Navigating to player with playerId:",e),this.$router.push({name:"PlayerPage",params:{playerId:e}})},getPlacementClass(e){const t={1:"placement-gold",2:"placement-silver",3:"placement-bronze",11:"placement-g1",12:"placement-g2",13:"placement-g3",14:"placement-g4",15:"placement-g5"};return e>=4&&e<=10?"placement-blue":t[e]||""},getMedal(e){return["🥇","🥈","🥉"][e-1]||""},getRankName(e,t){const a=[{range:[1,1],male:"Emperor",female:"Empress"},{range:[2,2],male:"King",female:"Queen"},{range:[3,3],male:"Archduke",female:"Archduchess"},{range:[4,4],male:"Lord",female:"Lady"},{range:[5,5],male:"Duke",female:"Duchess"},{range:[6,10],male:"Prince",female:"Princess"},{range:[11,15],male:"Earl",female:"Gearl"},{range:[16,20],male:"Sir",female:"Madam"},{range:[21,25],male:"Count",female:"Countess"},{range:[26,30],male:"Baron V",female:"Baroness V"},{range:[31,35],male:"Baron IV",female:"Baroness IV"},{range:[36,40],male:"Baron III",female:"Baroness III"},{range:[41,45],male:"Baron II",female:"Baroness II"},{range:[46,50],male:"Baron I",female:"Baroness I"},{range:[51,60],male:"Knight",female:"Dame"},{range:[61,70],male:"Knight",female:"Dame"},{range:[71,80],male:"Knight",female:"Dame"},{range:[81,90],male:"Knight",female:"Dame"},{range:[91,100],male:"Knight",female:"Dame"},{range:[101,120],male:"Noble V",female:"Noblewoman V"},{range:[121,140],male:"Noble IV",female:"Noblewoman IV"},{range:[141,160],male:"Noble III",female:"Noblewoman III"},{range:[161,180],male:"Noble II",female:"Noblewoman II"},{range:[181,200],male:"Noble I",female:"Noblewoman I"},{range:[201,260],male:"Esquire V",female:"Esquire V"},{range:[261,320],male:"Esquire IV",female:"Esquire IV"},{range:[321,380],male:"Esquire III",female:"Esquire III"},{range:[381,440],male:"Esquire II",female:"Esquire II"},{range:[441,500],male:"Esquire I",female:"Esquire I"},{range:[501,600],male:"Jester V",female:"Jester V"},{range:[601,700],male:"Jester IV",female:"Jester IV"},{range:[701,800],male:"Jester III",female:"Jester III"},{range:[801,900],male:"Jester II",female:"Jester II"},{range:[901,1e3],male:"Jester I",female:"Jester I"},{range:[1001,1300],male:"Plebeian I",female:"Plebeian I"},{range:[1301,1600],male:"Plebeian II",female:"Plebeian II"},{range:[1601,1900],male:"Plebeian III",female:"Plebeian III"},{range:[1901,2200],male:"Plebeian IV",female:"Plebeian IV"},{range:[2201,2500],male:"Plebeian V",female:"Plebeian V"},{range:[2501,2700],male:"Peasant I",female:"Peasant I"},{range:[2701,2900],male:"Peasant II",female:"Peasant II"},{range:[2901,3100],male:"Peasant III",female:"Peasant III"},{range:[3101,3300],male:"Peasant IV",female:"Peasant IV"},{range:[3301,3500],male:"Peasant V",female:"Peasant V"},{range:[3501,4e3],male:"Peasant VI",female:"Peasant VI"},{range:[4001,5e3],male:"Peasant VII",female:"Peasant VII"},{range:[5001,999999],male:"Peon",female:"Peon"}];for(const s of a)if(e>=s.range[0]&&e<=s.range[1]){const e="male"===t?s.male:s.female;let a=s.male.replace(/\s[IVX]+$/,"").toLowerCase();return"Queen"!==e&&"Empress"!==e||(a=s.female.replace(/\s[IVX]+$/,"").toLowerCase()),{title:e,color:`rank-color-${a}`}}return{title:"Unranked",color:"--color-peon"}},getHighestRank(){return"overall"===this.player.rank_pref?this.player.overall_rank:"soldier"===this.player.rank_pref?this.player.soldier_rank:"demoman"===this.player.rank_pref?this.player.demoman_rank:Math.min(this.player.overall_rank,this.player.soldier_rank,this.player.demoman_rank)},getFlagImageUrl(e){const t=/^[a-zA-Z]{2}$/.test(e)?e.toLowerCase():"unknown";return`https://flagcdn.com/24x18/${t}.png`},getLauncherIcon(e){const t=this.launcherOptions.find((t=>t.value===e));return t?t.icon:"/icons/rocketlauncher.png"},setLauncherPreference(e){this.player.launcher_pref=e,this.showLauncherMenu=!1},handleImageError(e){e.target.src="/icons/default-flag.jpg"},returnToAllPlayers(){this.$router.push("/players")},async fetchUserData(e){try{const t=await Dt.A.get(`${Ml}/users/${e}`),a=t.data;if(!a||0===a.length)return void console.log("User not found");this.player={...this.player,gender:a.gender,rank_pref:a.rank_pref},this.user=t.data[0]}catch(t){console.error("Error fetching user data:",t)}},async fetchPlayerData(e){try{const t=await Dt.A.get(`${Ml}/players/${e}`);if(0===t.data.length)return void(this.playerNotFound=!0);const a=t.data[0];this.player={...this.player,...a,avatar:a.steam_avatar||"golly.jpg",country:a.country||"unknown",country_code:a.country_code||"unknown"},document.title="Tempus plaza - "+(this.player.name||"Player")}catch(t){this.error="Failed to fetch player data. Please try again later.",console.error("Error fetching player data:",t),this.playerNotFound=!0}finally{this.loading.ranks=!1}},async fetchPlayerRanks(e){try{const t=await Dt.A.get(`${Ml}/players/${e}/ranks`),a=t.data[0];this.player.overall_rank=a.overall_rank,this.player.soldier_rank=a.soldier_rank,this.player.demoman_rank=a.demoman_rank,this.player.overall_points=a.soldier_points+a.demoman_points,this.player.soldier_points=a.soldier_points,this.player.demoman_points=a.demoman_points}catch(t){this.error="Failed to fetch player ranks. Please try again later.",console.error("Error fetching player ranks:",t)}finally{this.loading.ranks=!1}},async fetchRecentRecords(e){try{const t=await Dt.A.get(`${Ml}/players/${e}/recent-records`),a=t.data;this.records.recentRecords=a.allRecords,this.records.topTimes=a.top10Records,this.records.worldRecords=a.worldRecords}catch(t){this.error="Failed to fetch player recent records. Please try again later.",console.error("Error fetching recent records:",t)}finally{this.loading["Latest runs"]=!1,this.loading["Latest top times"]=!1,this.loading["Latest world records"]=!1}},async fetchPlayerStats(e){try{const t=await Dt.A.get(`${Ml}/players/${e}/stats`),a=t.data;this.stats={total:{completion:{soldier:a.soldier.completion.total,demoman:a.demoman.completion.total},worldRecordAmount:{soldier:a.soldier.worldRecords.total,demoman:a.demoman.worldRecords.total},topTimesAmount:{soldier:a.soldier.top10Records.total,demoman:a.demoman.top10Records.total},placement:{soldier:{G1:a.soldier.g1Records.total,G2:a.soldier.g2Records.total,G3:a.soldier.g3Records.total,G4:a.soldier.g4Records.total},demoman:{G1:a.demoman.g1Records.total,G2:a.demoman.g2Records.total,G3:a.demoman.g3Records.total,G4:a.demoman.g4Records.total}}},map:{completion:{soldier:Math.round(100*(a.soldier.completion.map+Number.EPSILON))/100,demoman:Math.round(100*(a.demoman.completion.map+Number.EPSILON))/100},worldRecordAmount:{soldier:a.soldier.worldRecords.map,demoman:a.demoman.worldRecords.map},topTimesAmount:{soldier:a.soldier.top10Records.map,demoman:a.demoman.top10Records.map},placement:{soldier:{G1:a.soldier.g1Records.map,G2:a.soldier.g2Records.map,G3:a.soldier.g3Records.map,G4:a.soldier.g4Records.map},demoman:{G1:a.demoman.g1Records.map,G2:a.demoman.g2Records.map,G3:a.demoman.g3Records.map,G4:a.demoman.g4Records.map}}},course:{completion:{soldier:a.soldier.completion.course,demoman:a.demoman.completion.course},worldRecordAmount:{soldier:a.soldier.worldRecords.course,demoman:a.demoman.worldRecords.course},topTimesAmount:{soldier:a.soldier.top10Records.course,demoman:a.demoman.top10Records.course},placement:{soldier:{G1:a.soldier.g1Records.course,G2:a.soldier.g2Records.course,G3:a.soldier.g3Records.course,G4:a.soldier.g4Records.course},demoman:{G1:a.demoman.g1Records.course,G2:a.demoman.g2Records.course,G3:a.demoman.g3Records.course,G4:a.demoman.g4Records.course}}},bonus:{completion:{soldier:a.soldier.completion.bonus,demoman:a.demoman.completion.bonus},worldRecordAmount:{soldier:a.soldier.worldRecords.bonus,demoman:a.demoman.worldRecords.bonus},topTimesAmount:{soldier:a.soldier.top10Records.bonus,demoman:a.demoman.top10Records.bonus},placement:{soldier:{G1:a.soldier.g1Records.bonus,G2:a.soldier.g2Records.bonus,G3:a.soldier.g3Records.bonus,G4:a.soldier.g4Records.bonus},demoman:{G1:a.demoman.g1Records.bonus,G2:a.demoman.g2Records.bonus,G3:a.demoman.g3Records.bonus,G4:a.demoman.g4Records.bonus}}}}}catch(t){this.error="Failed to fetch player stats. Please try again later.",console.error("Error fetching player stats:",t)}finally{this.loading.stats=!1}},async fetchSharedTimes(e){try{let t="/shared-top-times";this.player.shared_soldier_type="Top time buddies",this.player.shared_demoman_type="Top time buddies";const a=await Dt.A.get(`${Ml}/players/${e}/tt-amount`);0===a.data[0].soldier_maps_count&&(t="/shared-g1-times",this.player.shared_soldier_type="Group 1 buddies"),0===a.data[0].demoman_maps_count&&(t="/shared-g1-times",this.player.shared_demoman_type="Group 1 buddies");const s=await Dt.A.get(`${Ml}/players/${e}${t}`),r=s.data,l={},o={};r.forEach((t=>{if(t.player_id!==e){const e=t.player_name,a=t.player_id;"soldier"===t.class?l[e]?l[e].count++:l[e]={count:1,playerId:a}:"demoman"===t.class&&(o[e]?o[e].count++:o[e]={count:1,playerId:a})}}));const n=Object.entries(l).map((([e,t])=>({playerName:e,count:t.count,playerId:t.playerId}))),i=Object.entries(o).map((([e,t])=>({playerName:e,count:t.count,playerId:t.playerId}))),c=n.sort(((e,t)=>t.count-e.count)).slice(0,5),d=i.sort(((e,t)=>t.count-e.count)).slice(0,5);this.sharedTimesSoldier=c,this.sharedTimesDemoman=d}catch(t){throw console.error("Error fetching shared top times:",t),t}finally{this.loading.shared=!1}},formatDuration(e){return Se(e)},formatDate(e){return Xe(e)}}},Vl=(0,M.A)(Gl,[["render",Al],["__scopeId","data-v-a75e1026"]]),Nl=Vl,Bl={class:"container map-page py-4",style:{background:"var(--color-background)"}},Ol={key:0,class:"alert alert-warning map-not-found text-center"},Ql={key:1},Ul={class:"row g-0"},Kl={class:"col-md-12 d-flex flex-column align-items-center map-left p-4"},jl={class:"map-info text-center w-100"},Wl={key:0,class:"map-name mb-2"},zl={class:"row p-3 map-overview w-100"},Hl={class:"col-md-3 mb-3"},Jl={class:"card stat-block h-100"},ql={class:"card-body text-center"},Yl={class:"col-md-3 mb-3"},Zl={class:"card stat-block h-100"},eo={class:"card-body text-center"},to={class:"col-md-3 mb-3"},ao={class:"card stat-block h-100"},so={class:"card-body text-center"},ro={class:"col-md-3 mb-3"},lo={class:"card stat-block h-100"},oo={class:"card-body text-center"},no={key:1,class:"row w-100"},io={class:"col-md-12"},co={class:"courses-block"},uo={class:"card stat-block h-100"},mo={class:"card-body text-center"},po={class:"card-title"},ho={class:"ratings-grid"},ko={key:2,class:"divider"},go={key:3,class:"row w-100"},yo={class:"col-md-12"},vo={class:"bonuses-block"},bo={class:"card stat-block h-100"},Lo={class:"card-body text-center"},fo={class:"card-title"},Co={class:"ratings-grid"},_o={key:4,class:"divider"},wo={class:"row w-100"},xo={class:"col-md-12"},Ro={class:"row authors-block"},Io=["src"],Eo={class:"author-name"},Po={class:"map-date-added text-right"},Do={class:"row main-content-wrapper"},To={class:"col-md-12 map-details"},So={class:"card map-videos mb-4",style:{background:"var(--color-box)"}},Xo={class:"card-body"},$o={class:"row"},Fo={class:"col-md-6 text-center"},Ao={class:"video-container"},Mo={key:0},Go=["src"],Vo={key:1},No={class:"col-md-6 text-center"},Bo={class:"video-container"},Oo={key:0},Qo=["src"],Uo={key:1};function Ko(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("div",Bl,[o.mapNotFound?((0,r.uX)(),(0,r.CE)("div",Ol,[t[2]||(t[2]=(0,r.Lk)("p",{class:"mb-3"},"No map found",-1)),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.returnToAllMaps&&n.returnToAllMaps(...e)),class:"btn return-button"}," Return to all maps ")])):((0,r.uX)(),(0,r.CE)("div",Ql,[o.map?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"card map-banner mb-4 shadow",style:(0,l.Tr)({background:o.map&&o.map.name?`linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('/maps/${o.map.name}.jpg') center/cover no-repeat`:"linear-gradient(135deg, var(--color-primary), var(--color-box))",backgroundBlendMode:"multiply",backgroundSize:"cover",backgroundPosition:"center",border:"1px solid rgba(42, 42, 42, 0.99)"})},[(0,r.Lk)("div",Ul,[(0,r.Lk)("div",Kl,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.goBack&&n.goBack(...e)),class:"btn btn-dark back-button"}," Back "),(0,r.Lk)("div",jl,[o.map.name?((0,r.uX)(),(0,r.CE)("h1",Wl,(0,l.v_)(o.map.name),1)):(0,r.Q3)("",!0),(0,r.Lk)("div",zl,[(0,r.Lk)("div",Hl,[(0,r.Lk)("div",Jl,[(0,r.Lk)("div",ql,[t[3]||(t[3]=(0,r.Lk)("h3",{class:"card-title"},"Soldier tier",-1)),(0,r.Lk)("p",{class:(0,l.C4)(["card-text main-tier-color","tier-"+o.map.soldier_tier])}," T"+(0,l.v_)(o.map.soldier_tier),3)])])]),(0,r.Lk)("div",Yl,[(0,r.Lk)("div",Zl,[(0,r.Lk)("div",eo,[t[4]||(t[4]=(0,r.Lk)("h3",{class:"card-title"},"Soldier rating",-1)),(0,r.Lk)("p",{class:(0,l.C4)(["card-text main-rating-color","rating-"+o.map.soldier_rating])}," R"+(0,l.v_)(o.map.soldier_rating),3)])])]),(0,r.Lk)("div",to,[(0,r.Lk)("div",ao,[(0,r.Lk)("div",so,[t[5]||(t[5]=(0,r.Lk)("h3",{class:"card-title"},"Demoman tier",-1)),(0,r.Lk)("p",{class:(0,l.C4)(["card-text main-tier-color","tier-"+o.map.demoman_tier])}," T"+(0,l.v_)(o.map.demoman_tier),3)])])]),(0,r.Lk)("div",ro,[(0,r.Lk)("div",lo,[(0,r.Lk)("div",oo,[t[6]||(t[6]=(0,r.Lk)("h3",{class:"card-title"},"Demoman rating",-1)),(0,r.Lk)("p",{class:(0,l.C4)(["card-text main-rating-color","rating-"+o.map.demoman_rating])}," R"+(0,l.v_)(o.map.demoman_rating),3)])])])]),t[14]||(t[14]=(0,r.Lk)("hr",{class:"divider"},null,-1)),o.courses.length>0?((0,r.uX)(),(0,r.CE)("div",no,[(0,r.Lk)("div",io,[t[9]||(t[9]=(0,r.Lk)("h2",{class:"section-header"},"Courses",-1)),(0,r.Lk)("div",co,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.courses,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"course-item"},[(0,r.Lk)("div",uo,[(0,r.Lk)("div",mo,[(0,r.Lk)("h3",po," Course "+(0,l.v_)(e.course_index),1),(0,r.Lk)("div",ho,[t[7]||(t[7]=(0,r.Lk)("div",{class:"rating-label"},"Soldier",-1)),(0,r.Lk)("div",{class:(0,l.C4)(["rating-box tier-color","tier-"+e.soldier_tier])}," T"+(0,l.v_)(e.soldier_tier),3),(0,r.Lk)("div",{class:(0,l.C4)(["rating-box rating-color","rating-"+e.soldier_rating])}," R"+(0,l.v_)(e.soldier_rating),3),t[8]||(t[8]=(0,r.Lk)("div",{class:"rating-label"},"Demoman",-1)),(0,r.Lk)("div",{class:(0,l.C4)(["rating-box tier-color","tier-"+e.demoman_tier])}," T"+(0,l.v_)(e.demoman_tier),3),(0,r.Lk)("div",{class:(0,l.C4)(["rating-box rating-color","rating-"+e.demoman_rating])}," R"+(0,l.v_)(e.demoman_rating),3)])])])])))),128))])])])):(0,r.Q3)("",!0),o.courses.length>0?((0,r.uX)(),(0,r.CE)("hr",ko)):(0,r.Q3)("",!0),o.bonuses.length>0?((0,r.uX)(),(0,r.CE)("div",go,[(0,r.Lk)("div",yo,[t[12]||(t[12]=(0,r.Lk)("h2",{class:"section-header"},"Bonuses",-1)),(0,r.Lk)("div",vo,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.bonuses,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"bonus-item"},[(0,r.Lk)("div",bo,[(0,r.Lk)("div",Lo,[(0,r.Lk)("h3",fo," Bonus "+(0,l.v_)(e.bonus_index),1),(0,r.Lk)("div",Co,[t[10]||(t[10]=(0,r.Lk)("div",{class:"rating-label"},"Soldier",-1)),(0,r.Lk)("div",{class:(0,l.C4)(["rating-box tier-color","tier-"+e.soldier_tier])}," T"+(0,l.v_)(e.soldier_tier),3),(0,r.Lk)("div",{class:(0,l.C4)(["rating-box rating-color","rating-"+e.soldier_rating])}," R"+(0,l.v_)(e.soldier_rating),3),t[11]||(t[11]=(0,r.Lk)("div",{class:"rating-label"},"Demoman",-1)),(0,r.Lk)("div",{class:(0,l.C4)(["rating-box tier-color","tier-"+e.demoman_tier])}," T"+(0,l.v_)(e.demoman_tier),3),(0,r.Lk)("div",{class:(0,l.C4)(["rating-box rating-color","rating-"+e.demoman_rating])}," R"+(0,l.v_)(e.demoman_rating),3)])])])])))),128))])])])):(0,r.Q3)("",!0),o.bonuses.length>0?((0,r.uX)(),(0,r.CE)("hr",_o)):(0,r.Q3)("",!0),(0,r.Lk)("div",wo,[(0,r.Lk)("div",xo,[t[13]||(t[13]=(0,r.Lk)("h2",{class:"section-header"},"Authors",-1)),(0,r.Lk)("div",Ro,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.authors,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"col-md-4 text-center"},[(0,r.Lk)("img",{src:e&&e.player&&e.player.steam_avatar?`${e.player.steam_avatar}`:"/avatars/default-avatar.jpg",alt:"Author Avatar",class:"rounded-circle author-avatar mb-3"},null,8,Io),(0,r.Lk)("h5",Eo,(0,l.v_)(e.name?e.name:"Unknown Author"),1)])))),128))])])]),(0,r.Lk)("p",Po," Added on: "+(0,l.v_)(n.formatDate(o.map.date_added)),1)])])])],4)):(0,r.Q3)("",!0),(0,r.Lk)("div",Do,[(0,r.Lk)("div",To,[(0,r.Lk)("div",So,[(0,r.Lk)("div",Xo,[t[19]||(t[19]=(0,r.Lk)("h2",{class:"section-header"},"Videos",-1)),(0,r.Lk)("div",$o,[(0,r.Lk)("div",Fo,[t[16]||(t[16]=(0,r.Lk)("h4",{class:"card-title"},"Soldier video",-1)),(0,r.Lk)("div",Ao,[o.map&&o.map.soldier_video&&"null"!==o.map.soldier_video?((0,r.uX)(),(0,r.CE)("div",Mo,[(0,r.Lk)("iframe",{src:"https://www.youtube.com/embed/"+o.map.soldier_video,frameborder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,Go)])):((0,r.uX)(),(0,r.CE)("div",Vo,t[15]||(t[15]=[(0,r.Lk)("i",{class:"bi bi-camera-video-off"},null,-1)])))])]),(0,r.Lk)("div",No,[t[18]||(t[18]=(0,r.Lk)("h4",{class:"card-title"},"Demoman video",-1)),(0,r.Lk)("div",Bo,[o.map&&o.map.demoman_video&&"null"!==o.map.demoman_video?((0,r.uX)(),(0,r.CE)("div",Oo,[(0,r.Lk)("iframe",{src:"https://www.youtube.com/embed/"+o.map.demoman_video,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,Qo)])):((0,r.uX)(),(0,r.CE)("div",Uo,t[17]||(t[17]=[(0,r.Lk)("i",{class:"bi bi-camera-video-off"},null,-1)])))])])])])])])])]))])}const jo="http://localhost:3000",Wo={name:"MapPage",props:{mapId:{type:Number,required:!0}},data(){return{map:null,authors:[],courses:[],bonuses:[],mapNotFound:!1}},async mounted(){await this.fetchAllMapData(this.mapId),document.title="Tempus plaza - "+(this.map.name||"Map")},methods:{returnToAllMaps(){this.$router.push("/maps")},goBack(){this.$router.go(-1)},async fetchAllMapData(e){try{const t=await Dt.A.get(`${jo}/maps/${e}/all-info`);if(!t.data.map)return void(this.mapNotFound=!0);this.map=t.data.map,this.authors=t.data.authors,this.courses=t.data.courses,this.bonuses=t.data.bonuses}catch(t){this.error="Failed to fetch map data. Please try again later.",console.error("Error fetching map data:",t),this.mapNotFound=!0}},formatDate(e){const t=new Date(1e3*e),a=String(t.getDate()).padStart(2,"0"),s=String(t.getDate()+1).padStart(2,"0"),r=t.getFullYear();return`${a}/${s}/${r}`}}},zo=(0,M.A)(Wo,[["render",Ko],["__scopeId","data-v-26cc08bb"]]),Ho=zo,Jo={class:"container records-container py-4 d-flex flex-column align-items-center bg-dark-custom"},qo={class:"search-section"},Yo={class:"search-input-wrapper"},Zo={key:0,class:"search-results-dropdown"},en=["onClick"],tn={key:0,class:"player-name-display"},an={key:1,class:"row-divider",style:{width:"75%"}},sn={class:"filter-section"},rn={class:"filter-content"},ln={class:"filter-columns"},on={class:"filter-group"},nn={class:"tier-filter-container"},cn={class:"tier-filters"},dn=["value"],un={class:"filter-group"},mn={class:"tier-filter-container"},pn={class:"tier-filters"},hn=["value"],kn={class:"filter-columns"},gn={class:"filter-group"},yn={class:"rating-filter-container"},vn={class:"rating-filters"},bn=["value"],Ln={class:"filter-group"},fn={class:"rating-filter-container"},Cn={class:"rating-filters"},_n=["value"],wn={class:"filter-group"},xn={class:"group-filter-container"},Rn={class:"group-filters"},In={class:"group-checkbox"},En={class:"group-checkbox"},Pn=["value"],Dn={class:"filter-columns"},Tn={class:"filter-group"},Sn={class:"class-filter-container"},Xn=["value"],$n={class:"filter-group"},Fn={class:"type-filter-container"},An=["value"],Mn={class:"filter-group"},Gn={class:"dropdown"},Vn={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},Nn={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},Bn=["onClick"],On={class:"filter-actions"},Qn={class:"text-light"},Un={key:2,class:"text-center"},Kn={key:3,class:"alert alert-danger"},jn={key:4,class:"tables-wrapper d-flex flex-column flex-md-row justify-content-center"},Wn={key:0,class:"table-wrapper"},zn={class:"table-responsive"},Hn={class:"table table-dark"},Jn=["src","alt"],qn={class:"text-small"},Yn={class:"maps-footer"};function Zn(e,t,a,o,n,i){return(0,r.uX)(),(0,r.CE)("div",Jo,[(0,r.Lk)("div",qo,[(0,r.Lk)("div",{class:"search-container",onClick:t[2]||(t[2]=(0,s.D$)((()=>{}),["stop"]))},[(0,r.Lk)("div",Yo,[t[23]||(t[23]=(0,r.Lk)("svg",{class:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,r.Lk)("circle",{cx:"11",cy:"11",r:"8"}),(0,r.Lk)("path",{d:"m21 21-4.35-4.35"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchQuery=t),onInput:t[1]||(t[1]=(...e)=>i.onSearch&&i.onSearch(...e)),placeholder:"Search for players...",class:"search-input"},null,544),[[s.Jo,e.searchQuery]])]),e.searchResults&&e.searchResults.players.length?((0,r.uX)(),(0,r.CE)("div",Zo,[(0,r.Lk)("div",null,[t[24]||(t[24]=(0,r.Lk)("h6",null,"Players",-1)),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.searchResults.players,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,onClick:t=>i.selectPlayer(e.id)},(0,l.v_)(e.name||`Player ID: ${e.id}`),9,en)))),128))])])])):(0,r.Q3)("",!0)])]),t[37]||(t[37]=(0,r.Lk)("hr",{class:"row-divider",style:{width:"75%"}},null,-1)),e.playerId?((0,r.uX)(),(0,r.CE)("div",tn,[(0,r.Lk)("h2",null,(0,l.v_)(e.selectedPlayerName||"Selected Player"),1)])):(0,r.Q3)("",!0),e.playerId?((0,r.uX)(),(0,r.CE)("hr",an)):(0,r.Q3)("",!0),(0,r.Lk)("div",sn,[(0,r.Lk)("div",rn,[(0,r.Lk)("div",ln,[(0,r.Lk)("div",on,[t[25]||(t[25]=(0,r.Lk)("h6",{class:"filter-title text-light mb-2"},"Soldier Tiers",-1)),(0,r.Lk)("div",nn,[(0,r.Lk)("div",cn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.availableTiers,(a=>((0,r.uX)(),(0,r.CE)("label",{key:"soldier-tier-"+a,class:"tier-checkbox"},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:a,"onUpdate:modelValue":t[3]||(t[3]=t=>e.selectedSoldierTiers=t),onChange:t[4]||(t[4]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,40,dn),[[s.lH,e.selectedSoldierTiers]]),(0,r.Lk)("span",{class:(0,l.C4)(`tier-badge tier-${a}`)},(0,l.v_)(a),3)])))),128))])])]),(0,r.Lk)("div",un,[t[26]||(t[26]=(0,r.Lk)("h6",{class:"filter-title text-light mb-2"},"Demoman Tiers",-1)),(0,r.Lk)("div",mn,[(0,r.Lk)("div",pn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.availableTiers,(a=>((0,r.uX)(),(0,r.CE)("label",{key:"demo-tier-"+a,class:"tier-checkbox"},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:a,"onUpdate:modelValue":t[5]||(t[5]=t=>e.selectedDemomanTiers=t),onChange:t[6]||(t[6]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,40,hn),[[s.lH,e.selectedDemomanTiers]]),(0,r.Lk)("span",{class:(0,l.C4)(`tier-badge tier-${a}`)},(0,l.v_)(a),3)])))),128))])])])]),(0,r.Lk)("div",kn,[(0,r.Lk)("div",gn,[t[27]||(t[27]=(0,r.Lk)("h6",{class:"filter-title text-light mb-2"},"Soldier Ratings",-1)),(0,r.Lk)("div",yn,[(0,r.Lk)("div",vn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.availableRatings,(a=>((0,r.uX)(),(0,r.CE)("label",{key:"soldier-rating-"+a,class:"rating-checkbox"},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:a,"onUpdate:modelValue":t[7]||(t[7]=t=>e.selectedSoldierRatings=t),onChange:t[8]||(t[8]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,40,bn),[[s.lH,e.selectedSoldierRatings]]),(0,r.Lk)("span",{class:(0,l.C4)(`rating-badge rating-${a}`)},(0,l.v_)(a),3)])))),128))])])]),(0,r.Lk)("div",Ln,[t[28]||(t[28]=(0,r.Lk)("h6",{class:"filter-title text-light mb-2"},"Demoman Ratings",-1)),(0,r.Lk)("div",fn,[(0,r.Lk)("div",Cn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.availableRatings,(a=>((0,r.uX)(),(0,r.CE)("label",{key:"demo-rating-"+a,class:"rating-checkbox"},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:a,"onUpdate:modelValue":t[9]||(t[9]=t=>e.selectedDemomanRatings=t),onChange:t[10]||(t[10]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,40,_n),[[s.lH,e.selectedDemomanRatings]]),(0,r.Lk)("span",{class:(0,l.C4)(`rating-badge rating-${a}`)},(0,l.v_)(a),3)])))),128))])])])]),(0,r.Lk)("div",wn,[t[31]||(t[31]=(0,r.Lk)("h6",{class:"filter-title text-light mb-2"},"Placement",-1)),(0,r.Lk)("div",xn,[(0,r.Lk)("div",Rn,[(0,r.Lk)("label",In,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:"WR","onUpdate:modelValue":t[11]||(t[11]=t=>e.selectedGroups=t),onChange:t[12]||(t[12]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,544),[[s.lH,e.selectedGroups]]),t[29]||(t[29]=(0,r.Lk)("span",{class:"group-badge group-wr"},"WR",-1))]),(0,r.Lk)("label",En,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:"TT","onUpdate:modelValue":t[13]||(t[13]=t=>e.selectedGroups=t),onChange:t[14]||(t[14]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,544),[[s.lH,e.selectedGroups]]),t[30]||(t[30]=(0,r.Lk)("span",{class:"group-badge group-tt"},"TT",-1))]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.availableGroups,(a=>((0,r.uX)(),(0,r.CE)("label",{key:"group-"+a,class:"group-checkbox"},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:a,"onUpdate:modelValue":t[15]||(t[15]=t=>e.selectedGroups=t),onChange:t[16]||(t[16]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,40,Pn),[[s.lH,e.selectedGroups]]),(0,r.Lk)("span",{class:(0,l.C4)(`group-badge group-${a}`)},"G"+(0,l.v_)(a),3)])))),128))])])]),(0,r.Lk)("div",Dn,[(0,r.Lk)("div",Tn,[t[32]||(t[32]=(0,r.Lk)("h6",{class:"filter-title text-light mb-2"},"Class",-1)),(0,r.Lk)("div",Sn,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(["soldier","demoman"],(a=>(0,r.Lk)("label",{key:a,class:"class-checkbox"},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:a,"onUpdate:modelValue":t[17]||(t[17]=t=>e.selectedClasses=t),onChange:t[18]||(t[18]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,40,Xn),[[s.lH,e.selectedClasses]]),(0,r.Lk)("span",null,(0,l.v_)(a),1)]))),64))])]),(0,r.Lk)("div",$n,[t[33]||(t[33]=(0,r.Lk)("h6",{class:"filter-title text-light mb-2"},"Type",-1)),(0,r.Lk)("div",Fn,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(["map","course","bonus"],(a=>(0,r.Lk)("label",{key:a,class:"type-checkbox"},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:a,"onUpdate:modelValue":t[19]||(t[19]=t=>e.selectedTypes=t),onChange:t[20]||(t[20]=(...e)=>i.onFilterChange&&i.onFilterChange(...e))},null,40,An),[[s.lH,e.selectedTypes]]),(0,r.Lk)("span",null,(0,l.v_)(a),1)]))),64))])]),(0,r.Lk)("div",Mn,[t[34]||(t[34]=(0,r.Lk)("h6",{class:"filter-title text-light mb-2"},"Sort by",-1)),(0,r.Lk)("div",Gn,[(0,r.Lk)("button",Vn,(0,l.v_)(i.selectedSortOption),1),(0,r.Lk)("ul",Nn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.dropdownOptions,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.value},[(0,r.Lk)("a",{class:"dropdown-item",href:"#",onClick:(0,s.D$)((t=>i.selectSortOption(e.value)),["prevent"])},(0,l.v_)(e.label),9,Bn)])))),128))])])])]),(0,r.Lk)("div",On,[(0,r.Lk)("button",{type:"button",onClick:t[21]||(t[21]=(...e)=>i.clearAllFilters&&i.clearAllFilters(...e)),class:"btn btn-secondary"}," Clear filters "),(0,r.Lk)("span",Qn,"Displaying "+(0,l.v_)(i.filteredAndSortedItems.length)+" of "+(0,l.v_)(i.totalRecordsLength())+" records",1)])])]),t[38]||(t[38]=(0,r.Lk)("hr",{class:"row-divider",style:{width:"75%"}},null,-1)),e.loading?((0,r.uX)(),(0,r.CE)("div",Un,t[35]||(t[35]=[(0,r.Lk)("div",{class:"spinner-border text-light",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"Loading records...")],-1)]))):e.error?((0,r.uX)(),(0,r.CE)("div",Kn,(0,l.v_)(e.error),1)):((0,r.uX)(),(0,r.CE)("div",jn,[null!=e.playerId?((0,r.uX)(),(0,r.CE)("div",Wn,[(0,r.Lk)("div",zn,[(0,r.Lk)("table",Hn,[t[36]||(t[36]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Map"),(0,r.Lk)("th",null,"Type"),(0,r.Lk)("th",null,"Class"),(0,r.Lk)("th"),(0,r.Lk)("th"),(0,r.Lk)("th",null,"Time"),(0,r.Lk)("th",null,"Rank"),(0,r.Lk)("th",null,"Completion"),(0,r.Lk)("th",null,"Date")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.filteredRecords,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:t},[(0,r.Lk)("td",null,(0,l.v_)(e.map_name),1),(0,r.Lk)("td",null,(0,l.v_)(e.type.slice(0,1).toUpperCase()),1),(0,r.Lk)("td",null,[(0,r.Lk)("img",{src:`/icons/${e.class}.png`,alt:`${e.class} Icon`,class:"class-icon"},null,8,Jn)]),(0,r.Lk)("td",null,"T"+(0,l.v_)(e.tier),1),(0,r.Lk)("td",null,"R"+(0,l.v_)(e.rating),1),(0,r.Lk)("td",null,(0,l.v_)(i.formatDuration(e.duration)),1),(0,r.Lk)("td",{class:(0,l.C4)(i.getRankColorClass(e.placement))},(0,l.v_)(e.rank),3),(0,r.Lk)("td",null,(0,l.v_)(e.completion_count),1),(0,r.Lk)("td",qn,(0,l.v_)(i.formatDate(new Date(1e3*e.date))),1)])))),128))])]),(0,r.Lk)("div",Yn,[e.displayCount<i.filteredItems.length?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[22]||(t[22]=(...e)=>i.showMore&&i.showMore(...e)),class:"btn btn-dark update-button",style:{background:"var(--color-primary)","font-weight":"bold",width:"100%","border-radius":"0 0 0 0"}}," Show more ")):(0,r.Q3)("",!0)])])])):(0,r.Q3)("",!0)]))])}const ei="http://localhost:3000",ti={name:"PlayerRecords",data:()=>({playerId:null,selectedPlayerName:null,records:[],loading:!1,error:null,selectedClasses:[],selectedTypes:[],filteredRecords:[],selectedSoldierTiers:[],selectedSoldierRatings:[],selectedDemomanTiers:[],selectedDemomanRatings:[],availableTiers:[1,2,3,4,5,6,7,8,9,10],availableRatings:[1,2,3,4],availableGroups:[1,2,3,4,5],selectedGroups:[],sortByDate:"newest",searchQuery:"",searchResults:null,debounceTimer:null,cachedRecords:{records:[],courseRecords:[],bonusRecords:[]},dropdownOptions:[{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"},{value:"highestRank",label:"Highest Rank"},{value:"lowestRank",label:"Lowest Rank"},{value:"highestPercentage",label:"Highest %"},{value:"lowestPercentage",label:"Lowest %"},{value:"shortestDuration",label:"Shortest Duration"},{value:"longestDuration",label:"Longest Duration"}],validPlacements:[],displayCount:300}),computed:{user(){const e=S.A.get("user");if(!e)return null;try{return JSON.parse(e)}catch(t){return console.error("Malformed user cookie:",t),null}},filteredItems(){let e=[];return 0===this.selectedTypes.length?e=[...this.cachedRecords.records,...this.cachedRecords.courseRecords,...this.cachedRecords.bonusRecords]:(this.selectedTypes.includes("map")&&e.push(...this.cachedRecords.records),this.selectedTypes.includes("course")&&e.push(...this.cachedRecords.courseRecords),this.selectedTypes.includes("bonus")&&e.push(...this.cachedRecords.bonusRecords)),e.filter((e=>{if(this.selectedClasses.length>0&&!this.selectedClasses.includes(e.class))return!1;if("soldier"===e.class){if(this.selectedSoldierTiers.length>0&&!this.selectedSoldierTiers.includes(e.tier))return!1;if(this.selectedSoldierRatings.length>0&&!this.selectedSoldierRatings.includes(e.rating))return!1}else if("demoman"===e.class){if(this.selectedDemomanTiers.length>0&&!this.selectedDemomanTiers.includes(e.tier))return!1;if(this.selectedDemomanRatings.length>0&&!this.selectedDemomanRatings.includes(e.rating))return!1}return!(this.selectedGroups.length>0&&!this.validPlacements.includes(e.placement))}))},filteredAndSortedItems(){return this.filteredItems.slice().sort(((e,t)=>"newest"===this.sortByDate?t.date-e.date:"oldest"===this.sortByDate?e.date-t.date:"highestRank"===this.sortByDate?e.rank-t.rank:"lowestRank"===this.sortByDate?t.rank-e.rank:"highestPercentage"===this.sortByDate?t.completion_count/t.rank-e.completion_count/e.rank:"lowestPercentage"===this.sortByDate?e.completion_count/e.rank-t.completion_count/t.rank:"shortestDuration"===this.sortByDate?e.duration-t.duration:"longestDuration"===this.sortByDate?t.duration-e.duration:0))},selectedSortOption(){const e=this.dropdownOptions.find((e=>e.value===this.sortByDate));return e?e.label:"Newest"}},watch:{playerId(e){e&&this.fetchRecords()},selectedGroups:{handler(){const e=[];this.selectedGroups.forEach((t=>{"WR"===t?e.push(1):"TT"===t?e.push(2,3,4,5,6,7,8,9,10):e.push(10+Number(t))})),this.validPlacements=e},immediate:!0}},mounted(){document.title="Tempus plaza - Lookup",document.addEventListener("click",(e=>this.closeDropdown(e)));const e=S.A.get("user");let t=null;if(e)try{t=JSON.parse(e)}catch(a){console.error("Malformed user cookie:",a)}t&&t.playerid&&(this.playerId=t.playerid,this.selectedPlayerName=t.name,this.fetchRecords())},methods:{showMore(){this.displayCount+=300,this.applyFilters()},getRankColorClass(e){return 1===e?"placement-rank-gold":2===e?"placement-rank-silver":3===e?"placement-rank-bronze":e>=4&&e<=10?"placement-rank-tt":11===e?"placement-group-1":12===e?"placement-group-2":13===e?"placement-group-3":14===e?"placement-group-4":15===e?"placement-group-5":""},totalRecordsLength(){return this.cachedRecords.records.length+this.cachedRecords.courseRecords.length+this.cachedRecords.bonusRecords.length},formatDate(e){const t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return`${s}/${a}/${t}`},async onSearch(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((async()=>{if(this.searchQuery.trim())try{const e=await fetch(`${ei}/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:this.searchQuery})});if(!e.ok)throw new Error("Failed to fetch search results");const t=await e.json();t.players&&t.players.length>20&&(t.players=t.players.slice(0,20)),this.searchResults={players:t.players}}catch(e){console.error("Error fetching search results:",e)}else this.searchResults=null}),500)},selectPlayer(e){this.playerId=e,this.selectedPlayerName=this.searchResults.players.find((t=>t.id===e)).name,this.searchQuery="",this.searchResults=null},selectSortOption(e){this.sortByDate=e,this.sortRecords()},async fetchRecords(){this.loading=!0,this.error=null;const e=this.playerId;if(!e)return this.error="Please select a player first.",void(this.loading=!1);try{const t=[`${ei}/players/${e}/records`,`${ei}/players/${e}/course-records`,`${ei}/players/${e}/bonus-records`],a=await Promise.all(t.map((e=>fetch(e)))),s=await Promise.all(a.map((e=>{if(!e.ok)throw new Error("Failed to fetch records");return e.json()})));this.cachedRecords={records:s[0],courseRecords:s[1],bonusRecords:s[2]},this.records=this.cachedRecords.records,this.applyFilters()}catch(t){this.error="Error fetching records.",console.error("Error fetching records:",t)}finally{this.loading=!1}},applyFilters(){this.filteredRecords=this.filteredItems.slice(0,this.displayCount),this.sortRecords()},sortRecords(){this.filteredRecords.sort(((e,t)=>{switch(this.sortByDate){case"newest":return t.date-e.date;case"oldest":return e.date-t.date;case"highestRank":return e.rank-t.rank;case"lowestRank":return t.rank-e.rank;case"highestPercentage":return t.completion_count/t.rank-e.completion_count/e.rank;case"lowestPercentage":return e.completion_count/e.rank-t.completion_count/t.rank;case"shortestDuration":return e.duration-t.duration;case"longestDuration":return t.duration-e.duration;default:return 0}}))},clearAllFilters(){this.selectedClasses=[],this.selectedTypes=[],this.selectedSoldierTiers=[],this.selectedSoldierRatings=[],this.selectedDemomanTiers=[],this.selectedDemomanRatings=[],this.applyFilters()},closeDropdown(e){e.target.closest(".search-container")||(this.searchResults=null)},onFilterChange(){this.applyFilters()},formatDuration(e){return Se(e)}},beforeDestroy(){document.removeEventListener("click",this.closeDropdown),clearTimeout(this.debounceTimer)}},ai=(0,M.A)(ti,[["render",Zn],["__scopeId","data-v-694e2486"]]),si=ai,ri=[{path:"/",name:"Home",component:Ae},{path:"/maps",name:"Maps",component:Pa},{path:"/maps/:mapId",name:"MapPage",component:Ho,props:e=>({mapId:Number(e.params.mapId)})},{path:"/maps/:mapId/records",name:"Records",component:Xt,props:e=>({mapId:Number(e.params.mapId)})},{path:"/players/:category?/:item?",name:"Players",component:fs},{path:"/lookup",name:"Lookup",component:si},{path:"/players/:playerId",name:"PlayerPage",component:Nl,props:e=>({playerId:Number(e.params.playerId)})}],li=(0,N.aE)({history:(0,N.LA)(),routes:ri}),oi=li;a(754);const ni=(0,s.Ef)(V);ni.use(oi),ni.mount("#app")}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var l=t[s]={exports:{}};return e[s].call(l.exports,l,l.exports,a),l.exports}a.m=e,(()=>{var e=[];a.O=(t,s,r,l)=>{if(!s){var o=1/0;for(d=0;d<e.length;d++){for(var[s,r,l]=e[d],n=!0,i=0;i<s.length;i++)(!1&l||o>=l)&&Object.keys(a.O).every((e=>a.O[e](s[i])))?s.splice(i--,1):(n=!1,l<o&&(o=l));if(n){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[s,r,l]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var r,l,[o,n,i]=s,c=0;if(o.some((t=>0!==e[t]))){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(i)var d=i(a)}for(t&&t(s);c<o.length;c++)l=o[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(d)},s=self["webpackChunktempus_plaza"]=self["webpackChunktempus_plaza"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[504],(()=>a(565)));s=a.O(s)})();
//# sourceMappingURL=app.10d995e5.js.map